---
title: "Markdown 文档格式约束"
description: "项目文档中的Markdown格式约束和最佳实践，确保显示正确和易读性"
type: "技术设计"
status: "完成"
priority: "高"
created_date: "2025-11-23"
last_updated: "2025-11-23"
related_documents:
  - FRONTMATTER.md
  - ../../CLAUDE.md
tags: ["markdown", "格式约束", "文档规范"]
authors: ["Claude"]
version: "1.0"
---

# Markdown 文档格式约束

本文档定义了项目Markdown文档的格式约束和显示规范，确保文档在各种显示环境中都能正确渲染。

---

## 禁用的Markdown格式

### 1. 禁止使用emoji编号 (1️⃣, 2️⃣, 3️⃣ 等) 作为标记前缀

**问题描述**:
- emoji编号与后续冒号 `:` 组合时会导致显示重叠
- 影响可读性和专业性
- 在某些终端和浏览器中渲染不正确

**禁止的格式**:
```markdown
❌ 1️⃣: 第一步
❌ 2️⃣: 第二步
❌ 3️⃣: 第三步
❌ 路径 1️⃣：文档生成完成
```

**正确的替代格式**:

使用纯文本编号或其他方式代替：

```markdown
✅ Step 1: 第一步
✅ Step 2: 第二步
✅ Step 3: 第三步

✅ 路径 1 - 文档生成完成

✅ ### 方案 1 (标题方式)

✅ 1. 第一步 (有序列表)
2. 第二步
3. 第三步
```

### 2. 文本方向符号 (→) 的使用限制

**问题描述**:
- 箭头符号 `→` 在某些显示环境中可能导致格式混乱
- 不适合在表格和复杂布局中使用

**建议**:
- 使用纯文本描述流程: `改为`, `转到`, `进入`, `之后`, `然后`
- 使用列表和缩进表示层级关系
- 在必要时使用 `>>` 或 `-->` 作为替代

**示例**:

```markdown
❌ 需求 → 设计 → 实现 → 测试

✅ 需求 改为 设计 改为 实现 改为 测试

✅ 流程:
1. 需求
2. 设计
3. 实现
4. 测试
```

---

## 推荐的Markdown格式

### 1. 编号和列表

**推荐方式**:
- 使用纯数字编号: `1.`, `2.`, `3.`
- 使用纯文本前缀: `Step 1`, `Step 2`, `Step 3`
- 使用有序列表: `- [ ]` (复选框列表)

```markdown
✅ 工作流步骤:
1. 上下文加载
2. 实现策略设计
3. 代码实现
4. 质量验证

✅ 执行清单:
- [ ] 准备工作
- [ ] 代码实现
- [ ] 测试验证
- [ ] 提交保存
```

### 2. 流程和路径表示

**推荐方式**:
- 使用缩进列表表示层级
- 使用管道符 `|` 表示分支
- 使用关键字表示转移: `然后`, `接下来`, `下一步`, `最后`

```markdown
✅ 工作流位置:
工作流开始
  |
  +-- 路径 1: 快速修复
  |   +-- 问题诊断
  |   +-- 修复实现
  |   +-- 测试验证
  |   +-- 完成
  |
  +-- 路径 2: 重构方案
      +-- 设计分析
      +-- 大规模重构
      +-- 充分测试
      +-- 完成

✅ 执行流程:
工作开始
  下一步: 环境准备
  然后: 功能实现
  最后: 代码提交
```

### 3. 表格格式

**推荐方式**:
- 避免在表格中使用emoji编号
- 列标题使用清晰的纯文本
- 内容单元保持简洁

```markdown
✅ 可接受的格式:

| 步骤 | 操作 | 完成度 |
|------|------|--------|
| 1 | 准备环境 | 完成 |
| 2 | 实现功能 | 进行中 |
| 3 | 验证测试 | 未开始 |

❌ 避免的格式:

| 步骤 | 操作 |
|------|------|
| 1️⃣ | 准备 |
| 2️⃣ | 实现 |
```

### 4. 代码块和命令示例

**推荐方式**:
- 使用标准的 ``` 代码块
- 指定语言标签
- 避免在命令前加emoji编号

```markdown
✅ 正确格式:

执行以下步骤:

步骤 1: 安装依赖
bash
npm install


步骤 2: 运行测试
bash
npm test


❌ 避免的格式:

1️⃣ 安装依赖
bash
npm install


2️⃣ 运行测试
bash
npm test

```

---

## 应用场景指南

### Workflow 命令文档

**问题案例** (来自wf_14_doc.md):
```markdown
❌ #### 路径 3️⃣：发现文档结构或架构问题 🐛
```

**修正方式**:
```markdown
✅ #### 路径 3 - 发现文档结构或架构问题 (问题)
✅ #### 路径 3: 发现文档结构或架构问题 (问题)
✅ ### 路径 3 - 发现问题情况
```

### Help 和导航文档

**问题案例** (来自wf_99_help.md):
```markdown
❌ 1️⃣ /wf_01_planning 项目名称                       # 创建项目规划
❌ 3️⃣ /wf_03_prime                                  # 加载项目上下文
```

**修正方式**:
```markdown
✅ Step 1: /wf_01_planning 项目名称                  # 创建项目规划
✅ Step 3: /wf_03_prime                            # 加载项目上下文

或者:
✅ 1. /wf_01_planning 项目名称                       # 创建项目规划
✅ 3. /wf_03_prime                                 # 加载项目上下文
```

---

## 修复清单

如果发现违反此规范的格式，使用以下替换规则修复：

| 当前格式 | 替换为 | 说明 |
|---------|--------|------|
| `1️⃣:` | `Step 1:` 或 `1.` | emoji编号替换为纯文本 |
| `2️⃣:` | `Step 2:` 或 `2.` | emoji编号替换为纯文本 |
| `3️⃣:` | `Step 3:` 或 `3.` | emoji编号替换为纯文本 |
| `→` (在特殊上下文) | `改为`, `之后`, `下一步` | 用纯文本表达转移 |
| `任务1️⃣` | `任务 1` | emoji编号替换为空格+纯数字 |

---

## 自动化验证

项目pre-commit钩子包含Markdown格式验证，会检查：
- emoji编号的不当使用 (通过regex匹配 `\d+️⃣:` 模式)
- Frontmatter完整性
- 链接有效性
- 行结尾一致性

运行手动验证：
```bash
pre-commit run --all-files
```

---

## 相关文档

- [Frontmatter元数据规范](FRONTMATTER.md)
- [项目开发规范](../../CLAUDE.md)
- [文档最佳实践](../../docs/knowledge/DOCUMENTATION_PRACTICES.md)

---

**最后更新**: 2025-11-23
**版本**: 1.0
**状态**: 完成
