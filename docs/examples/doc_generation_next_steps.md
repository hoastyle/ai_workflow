# /wf_14_doc 完成后的后续步骤指南

本文档提供 `/wf_14_doc` 命令执行完成后的 4 种典型后续路径，帮助你选择最合适的下一步操作。

---

## 📍 工作流位置

当使用 `/wf_14_doc` 时，你正在执行标准开发流程的以下阶段：

```
[项目启动] → [任务规划] → [加载上下文] → [架构咨询] → [代码实现] → [测试验证] → [代码审查] → [文档生成 ← 当前] → [文档维护] → [提交保存]
  STEP 0       STEP 0.5        STEP 1         STEP 2       STEP 3       STEP 4       STEP 5        STEP 8.5            STEP 8      STEP 6
```

---

## ✅ 前置条件检查

执行 `/wf_14_doc` 前，应该已经完成：

1. ✅ **代码实现** (STEP 3) - 功能开发完成 (`/wf_05_code`)
2. ✅ **测试验证** (STEP 4) - 所有测试通过 (`/wf_07_test`)
3. ✅ **代码审查** (STEP 5) - 代码审查通过 (`/wf_08_review`)
4. ✅ **代码提交** (STEP 6 前置) - 代码已保存 (`/wf_11_commit`)

---

## 📝 当前步骤职责

**正在执行**: `/wf_14_doc [OPTIONS]` (智能文档生成和维护)

**核心职责**：
- 分析代码库结构和技术栈
- 识别文档缺口
- 从代码和配置中智能提取信息
- 生成或更新项目文档
- 为技术文档自动生成 Frontmatter 元数据
- 更新 KNOWLEDGE.md 文档索引
- 遵循"提取而非编造"原则

---

## 🔀 四种后续路径

### 路径 1：文档生成完成，进入维护 ✅

**适用场景**: 文档生成或更新完成，需要进行文档结构维护和审查

**执行步骤**:

```bash
# 当前: 文档已成功生成或更新
# 下一步: 文档结构维护和优化

/wf_13_doc_maintain --auto

# 或者使用 --dry-run 预览可能的改动
/wf_13_doc_maintain --dry-run

# 维护完成后重新加载上下文
/wf_03_prime

# 然后提交
/wf_11_commit "docs: 生成和优化项目文档"
```

---

### 路径 2：需要调整和完善生成的文档 🔧

**适用场景**: AI 生成的文档需要人工补充或调整，不是简单的生成而已

**执行步骤**:

```bash
# 当前: AI 生成的文档需要人工审查和完善
# 下一步: 手动调整文档细节

# 步骤 1: 审查生成的文档
# 步骤 2: 补充业务背景、使用建议、最佳实践
# 步骤 3: 添加图表或自定义示例
# 步骤 4: 验证代码示例的准确性

# 完成调整后运行验证
python ~/.claude/commands/scripts/frontmatter_utils.py validate-batch docs/

# 然后进行文档维护
/wf_13_doc_maintain --auto

# 最后提交
/wf_11_commit "docs: 完善自动生成的文档"
```

---

### 路径 3：发现文档结构或架构问题 🐛

**适用场景**: 文档生成过程暴露了代码或架构问题，需要先修复代码

**执行步骤**:

```bash
# 当前: 文档生成过程中发现代码结构或架构问题
# 下一步: 修复根本问题

# 如果是代码问题
/wf_06_debug "文档生成时发现的问题描述"

# 或需要代码重构
/wf_09_refactor "根据文档生成需要重构的部分"

# 修复完成后重新生成文档
/wf_14_doc

# 然后进行维护和提交
/wf_13_doc_maintain --auto
/wf_11_commit "refactor: 改进代码结构，更新文档"
```

---

### 路径 4：文档完成，进入提交流程 📝

**适用场景**: 所有文档都已完成、验证，准备提交

**执行步骤**:

```bash
# 当前: 文档已完成并验证（通过 Frontmatter 验证）
# 下一步: 提交所有更改

# 步骤 1: 确认所有文档都有有效的 Frontmatter
python ~/.claude/commands/scripts/frontmatter_utils.py validate-batch docs/

# 步骤 2: 重新加载上下文（如果有大量文档变化）
/wf_03_prime

# 步骤 3: 提交更改
/wf_11_commit "docs: 自动生成和更新项目文档"

# 步骤 4: 后续继续开发
/wf_05_code "实现下一个功能"
```

---

## 📊 完成检查清单

当你完成文档生成时，确保输出中包含：

✅ **已完成项**:
- 代码库分析报告（技术栈、架构、API 识别）
- 文档缺口分析（识别缺失和过时的文档）
- 生成或更新的文档清单
- KNOWLEDGE.md 索引更新情况
- 所有生成文档的 Frontmatter 验证结果
- 文档生成时间统计

⏭️ **下一步提示**:
- 建议执行的路径（4 个选项之一）
- 是否需要人工完善文档
- 是否发现了代码结构问题
- 推荐使用 `/wf_13_doc_maintain` 进行结构整理

---

## 💡 路径选择决策表

| 情况 | 建议路径 | 命令序列 |
|------|---------|---------|
| 文档生成完成，无问题 | 路径 1 | /wf_13_doc_maintain → /wf_11_commit |
| 文档生成有问题需完善 | 路径 2 | 手动调整 → 验证 → /wf_13_doc_maintain → /wf_11_commit |
| 发现代码结构问题 | 路径 3 | /wf_06_debug 或 /wf_09_refactor → /wf_14_doc → /wf_13_doc_maintain |
| 文档完成准备提交 | 路径 4 | 验证 → /wf_03_prime → /wf_11_commit |

---

## 🎯 典型使用场景

**何时生成文档？**
- ✅ 完成新功能实现后
- ✅ 添加新 API 端点后
- ✅ 修改配置或环境变量后
- ✅ 重构架构后
- ✅ 项目初始化时

**何时使用不同的选项？**
- `--update <type>` - 只更新特定类型文档（快速更新）
- `--check` - 只检查不生成（用于 CI/CD）
- `--auto` - 自动生成所有缺失文档（无交互）
- （默认）- 交互式选择要生成的文档

---

**See Also**:
- [/wf_14_doc](../../wf_14_doc.md) - 命令主文档
- [文档生成工作流](doc_generation_workflow.md) - 6步约束驱动流程
- [文档生成输出格式](doc_generation_outputs.md) - 报告格式参考
- [文档生成最佳实践](doc_generation_best_practices.md) - 使用指南
