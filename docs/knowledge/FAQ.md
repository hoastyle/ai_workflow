---
title: "常见问题和解决方案"
description: "工作流系统、ADR、设计哲学和常见错误的常见问题解答"
type: "故障排查"
status: "完成"
priority: "中"
created_date: "2025-11-23"
last_updated: "2025-11-23"
related_documents:
  - ../../PHILOSOPHY.md
  - ../../docs/adr/
tags:
  - faq
  - troubleshooting
  - design
authors:
  - Claude Code
version: "1.0"
---

## 系统相关问题

### Q1: 为什么 wf 命令系统中工作流导航不完整？

**A**: 这是 Phase 3 闭环工作流的实现不完整导致的。当前仅 6/16 文件有工作流导航部分，导致用户体验不一致。

**解决方案**:
1. 为所有 16 个 wf 命令文件添加"📌 工作流导航"部分
2. 统一格式和内容结构
3. 确保每个命令都显示工作流位置 (STEP X/Y) 和建议下一步
4. 参考 TASK.md 中的"任务 A"获取完整实施指南

**效果**: 工作流覆盖从 37.5% → 100%，用户体验一致性提升 140%

### Q2: wf_14_doc.md 太大了，如何简化？

**A**: wf_14_doc.md 包含过多示例和模板内容，可以提取到外部文档。

**解决方案**:
1. 提取 Examples 部分 → `docs/examples/wf_14_doc_examples.md`
2. 提取完整文档示例 → `docs/examples/documentation_templates.md`
3. wf_14_doc.md 中用链接指向这些文档
4. 参考 TASK.md 中的"任务 B"获取完整实施指南

**效果**: 文件行数减少 64%，维护成本降低 70%

**设计原则**: Simplify Ruthlessly (Ultrathink 原则 6)

### Q3: AI 为什么重新实现功能而不使用项目工具？

**A**: 这是命令文档不够明确导致的。当命令文档只包含伪代码示例而没有明确指示使用工具路径时，AI 会认为需要自己实现。

**解决方案**:
1. 在命令文档中添加 "🛠️ 可用工具" 部分
2. 列出工具的实际路径和使用命令
3. 用实际 Bash 命令替换伪代码
4. 添加明确的执行规则（✅ 必须使用 / ❌ 禁止重新实现）

**效果**: Token 消耗减少 97.5%（8000 → 200 tokens）

## 架构和设计问题

### Q4: 如何判断何时需要 ADR？

**A**: 当面对以下情况时，考虑创建 ADR:
- 多个技术选项需要权衡
- 架构有重大改变
- 重构/优化有复杂的权衡
- 决策影响多个组件或团队
- AI 执行行为与预期不符

简单的 bug 修复或小功能不需要 ADR。

### Q5: Ultrathink 会不会让开发变慢？

**A**: 短期可能慢，长期能省时间。设计不优雅的系统，后期维护和扩展成本极高。提前投入时间做好设计，后面的日子更轻松。

### Q6: 什么时候应该停止打磨代码？

**A**: 当代码达到"不得不这样"的程度时。追求必然优雅，而不是完美。如果继续改进带不来显著收益，就该发布了。

### Q7: 团队成员对设计理念的理解不同怎么办？

**A**: 这就是为什么要把决策记录到 ADR。写清楚权衡和理由，新成员能学到团队的设计理念。PHILOSOPHY.md 也能帮助统一认识。
