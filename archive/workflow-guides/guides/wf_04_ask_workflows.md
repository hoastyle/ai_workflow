---
title: "wf_04_ask 工作流和决策路径指南"
description: "架构咨询完整工作流导航、MCP集成决策矩阵和后续步骤选择指南"
type: "技术设计"
status: "完成"
priority: "高"
created_date: "2025-12-12"
last_updated: "2025-12-12"
related_documents:
  - "../../wf_04_ask.md"
  - "../../KNOWLEDGE.md"
  - "../../WORKFLOWS.md"
  - "../../docs/management/TASK.md"
  - "../../docs/management/PLANNING.md"
related_code: []
---

# wf_04_ask 工作流和决策路径指南

本文档详细说明 `/wf_04_ask` 在完整开发流程中的执行协议、MCP集成策略、决策矩阵和后续工作流路径选择。

---

## 🤖 AI执行协议（强制）

**本节为AI执行的强制规范，必须严格遵循，不得跳过或自行解释**

### 核心原则

1. **强制读取**: AI必须首先读取本文档的关键章节
2. **严格遵循**: 所有步骤按顺序执行，不得合并或跳过
3. **标准输出**: 必须使用本文档提供的输出模板
4. **检查验证**: 完成前必须通过所有检查清单项

### 执行流程概览

```
Step 0: 读取本执行协议 (当前)
  ↓
Step 1: Confidence Check（信心评估）
  ↓
Step 2: MCP模式选择（根据决策树）
  ↓
Step 3: 项目上下文加载
  ↓
Step 4: 执行咨询流程（标准/MCP增强/代码库审查）
  ↓
Step 5: 生成标准化输出
  ↓
Step 6: 后续路径选择
  ↓
检查清单验证 → 输出结果
```

### MCP模式选择决策树（强制使用）

**AI必须根据以下决策树选择执行模式**：

```
Step 1: 检查用户是否提供了明确的MCP标志？
│
├─ YES (用户提供了标志)
│  ├─ --think → 使用 Sequential-thinking 结构化推理模式
│  ├─ --c7 → 使用 Context7 官方文档查询模式
│  ├─ --research → 使用 Tavily Web搜索模式
│  ├─ --review-codebase → 使用代码库审查模式
│  └─ 组合标志 (--think --c7 --research) → 使用综合分析模式
│
└─ NO (用户未提供标志，AI需要判断)
   │
   ├─ 检查问题类型是否包含"选择"、"对比"、"评估"等关键词？
   │  ├─ YES → 建议使用 --think（复杂决策）
   │  └─ NO → 继续判断
   │
   ├─ 检查问题是否提到具体框架/库名称（如 React、Vue、Django）？
   │  ├─ YES → 建议使用 --c7（查询官方文档）
   │  └─ NO → 继续判断
   │
   ├─ 检查问题是否需要"最新"、"2025"、"趋势"等时效性信息？
   │  ├─ YES → 建议使用 --research（Web搜索）
   │  └─ NO → 继续判断
   │
   ├─ 检查问题是否涉及"代码库"、"项目质量"、"技术债务"？
   │  ├─ YES → 建议使用 --review-codebase
   │  └─ NO → 使用标准咨询模式
   │
   └─ 默认 → 使用标准咨询模式（不启用MCP）
```

### 咨询类型决策树（强制使用）

**根据问题类型选择咨询策略**：

```
Step 1: 分析问题类型
│
├─ 技术选型问题（"应该选择哪个XXX？"）
│  └─ 执行流程:
│     1. Confidence Check
│     2. 开源方案调研（3+个候选方案）
│     3. 官方文档查询（--c7，如果有具体库名）
│     4. 社区反馈搜索（--research，查看最新趋势）
│     5. 结构化对比（--think，系统化权衡）
│     6. 生成候选方案对比表
│     7. 给出明确推荐和理由
│
├─ 架构设计问题（"如何设计XXX系统？"）
│  └─ 执行流程:
│     1. Confidence Check
│     2. 理解需求和约束
│     3. 查阅PLANNING.md现有架构
│     4. 参考KNOWLEDGE.md类似决策
│     5. 结构化设计（--think，分步骤设计）
│     6. 验证方案可行性
│     7. 生成架构建议
│
├─ 实现方案问题（"如何实现XXX功能？"）
│  └─ 执行流程:
│     1. Confidence Check
│     2. 官方文档查询（--c7，获取最佳实践）
│     3. 开源实现参考（--research，查找示例）
│     4. 生成实现步骤
│     5. 提供代码示例（如果适用）
│
├─ 代码质量问题（"如何改进代码？"）
│  └─ 执行流程:
│     1. 代码库审查（--review-codebase）
│     2. 识别问题和风险
│     3. 生成优先级任务清单
│     4. 更新TASK.md
│
└─ 一般性咨询问题
   └─ 执行流程:
      1. Confidence Check
      2. 标准咨询流程
      3. 提供建议和后续步骤
```

### 后续路径决策树（强制使用）

**AI必须根据以下决策树选择后续工作流路径**：

```
架构咨询完成
  ↓
咨询已解决问题，可以直接编码？
├─ YES → 路径 1: 直接进入代码实现
│   命令序列: /wf_05_code → /wf_07_test → /wf_08_review → /wf_11_commit
│
└─ NO → 咨询建议需要更新项目规划和架构？
    ├─ YES → 路径 2: 更新规划和设计
    │   命令序列: /wf_01_planning → /wf_03_prime → /wf_05_code
    │
    └─ NO → 面对重大技术决策需要深度研究？
        ├─ YES → 路径 3: 进行深度研究和对比
        │   命令序列: /wf_04_research → /wf_04_ask → /wf_01_planning → /wf_05_code
        │
        └─ NO → 代码库审查发现问题？
            ├─ YES → 路径 4: 发现代码质量问题
            │   命令序列: /wf_06_debug 或 /wf_09_refactor → /wf_07_test → /wf_11_commit
            │
            └─ 默认 → 路径 1（直接实现）
```

### 标准输出模板（必须使用）

根据咨询场景，AI必须使用对应的输出模板：

#### 标准咨询输出模板（无MCP）

```markdown
# 架构咨询结果

## 🎯 Confidence Assessment

**信心水平**: [数值]% [🟢/🟡/🔴]

**评估明细**:
- [维度1]: [分数]
- [维度2]: [分数]
- ...

**决策**: [直接执行/提供备选方案/暂停并询问]

## 📋 问题分析

**问题类型**: [技术选型/架构设计/实现方案/代码质量/一般咨询]
**项目上下文**: [从PLANNING.md提取的相关架构信息]
**约束条件**: [从PLANNING.md提取的技术栈限制]

## 🔍 开源方案评估

### 候选方案 1: [方案名称]
- **优势**: [列出优势]
- **劣势**: [列出劣势]
- **License**: [MIT/Apache/GPL等]
- **社区**: [活跃度/维护状态]
- **集成成本**: [高/中/低]

### 候选方案 2: [方案名称]
[同上结构]

### 候选方案 3: [方案名称]
[同上结构]

## ✅ 推荐方案

**推荐**: [方案名称]

**理由**:
- ✅ [理由1]
- ✅ [理由2]
- ✅ [理由3]

**风险**:
- ⚠️ [潜在风险1]
- ⚠️ [潜在风险2]

## 📝 后续行动

1. [行动项1]
2. [行动项2]
3. [行动项3]

## ⏭️ 建议下一步

**推荐路径**: 路径 [1/2/3/4]
**理由**: [说明为什么选择这个路径]
**下一命令**: `/wf_XX_xxx "..."`

## 🔄 替代选项

- 路径 X: [适用场景]
- 路径 Y: [适用场景]
```

#### --think 增强输出模板（Sequential-thinking）

```markdown
# 架构咨询结果（结构化分析）

## 🎯 Confidence Assessment
[同标准模板]

## 🧠 Problem Decomposition

### Step 1: Understanding the requirement
[问题分解步骤1]

### Step 2: Identifying constraints
[问题分解步骤2]

### Step 3: Listing evaluation criteria
[问题分解步骤3]

### Step 4: Analyzing each option systematically
[问题分解步骤4]

## 📊 Option Analysis

### Option A: [方案名称]
- **功能完整性**: [评分] - [说明]
- **性能**: [评分] - [说明]
- **社区支持**: [评分] - [说明]
- **学习曲线**: [评分] - [说明]
- **总分**: [X/100]

### Option B: [方案名称]
[同上结构]

### Option C: [方案名称]
[同上结构]

## ⚖️ Trade-off Analysis

| 维度 | Option A | Option B | Option C |
|------|---------|---------|---------|
| 性能 vs 复杂度 | [说明] | [说明] | [说明] |
| 学习曲线 vs 维护性 | [说明] | [说明] | [说明] |
| 社区支持 vs 功能 | [说明] | [说明] | [说明] |
| License 影响 | [说明] | [说明] | [说明] |

## ✅ Structured Recommendation

**基于逐步分析的推荐**: [方案名称]

**推理链**:
1. [推理步骤1]
2. [推理步骤2]
3. [推理步骤3]
4. [结论]

[其余同标准模板]
```

#### --c7 增强输出模板（Context7）

```markdown
# 架构咨询结果（官方文档参考）

## 🎯 Confidence Assessment
[同标准模板]

## 📖 Official Documentation

### [框架/库 1]
- **官方文档**: [URL]
- **API 参考**: [URL]
- **官方教程**: [URL]
- **当前稳定版本**: [版本号]

### [框架/库 2]
[同上结构]

## 📚 Best Practices (官方推荐)

### [方案名称]
- **推荐模式**: [从官方文档提取]
- **常见陷阱**: [从官方文档提取]
- **配置最佳实践**: [从官方文档提取]

## 🔧 API Reference

### Core API Methods
- [方法1]: [用途和示例]
- [方法2]: [用途和示例]
- [方法3]: [用途和示例]

### Integration Points
- [集成点1]: [说明]
- [集成点2]: [说明]

## 📦 Version Information

- **Current stable version**: [版本号]
- **Breaking changes**: [最近版本的破坏性变更]
- **Compatibility matrix**: [兼容性说明]
- **Upgrade path**: [升级路径建议]

[其余同标准模板]
```

#### --research 增强输出模板（Tavily）

```markdown
# 架构咨询结果（社区反馈和最新趋势）

## 🎯 Confidence Assessment
[同标准模板]

## 💬 Community Feedback

### Stack Overflow Discussions
- [讨论主题1]: [链接和要点]
- [讨论主题2]: [链接和要点]

### Reddit Developer Opinions
- [观点1]: [来源和总结]
- [观点2]: [来源和总结]

### Blog Post Analyses
- [文章1]: [作者和核心观点]
- [文章2]: [作者和核心观点]

## 📈 Performance Data

### Latest Benchmarks
- [性能对比1]: [数据和来源]
- [性能对比2]: [数据和来源]

### Real-world Benchmark Results
- [案例1]: [结果和分析]
- [案例2]: [结果和分析]

## 📊 Adoption Trends

### GitHub Statistics
| 方案 | Stars | Growth (6mo) | Contributors | Last Update |
|------|-------|--------------|--------------|-------------|
| [方案1] | [数字] | [趋势] | [数字] | [日期] |
| [方案2] | [数字] | [趋势] | [数字] | [日期] |
| [方案3] | [数字] | [趋势] | [数字] | [日期] |

### NPM Download Statistics
- [方案1]: [下载量和趋势]
- [方案2]: [下载量和趋势]
- [方案3]: [下载量和趋势]

## 🆕 Recent Updates

### [方案1]
- **Latest Release**: [版本号和日期]
- **Breaking Changes**: [变更说明]
- **Migration Guide**: [链接]
- **Roadmap**: [未来计划]
- **Security Advisories**: [安全公告]

[其余同标准模板]
```

#### 组合输出模板（--think --c7 --research）

```markdown
# 架构咨询结果（综合分析）

## 🎯 Confidence Assessment
[同标准模板]

## 🧠 Problem Decomposition
[来自 --think 模板]

## 📊 Option Analysis
[来自 --think 模板，增强官方文档和社区数据]

### Option A: [方案名称]
- **功能完整性**: [评分] - [官方文档验证]
- **性能**: [评分] - [社区benchmark数据]
- **社区支持**: [评分] - [GitHub统计]
- **学习曲线**: [评分] - [社区反馈]
- **总分**: [X/100]

## 📖 Official Documentation
[来自 --c7 模板]

## 💬 Community Feedback
[来自 --research 模板]

## ⚖️ Trade-off Analysis
[来自 --think 模板，增强实际数据]

## ✅ Comprehensive Recommendation

**多维度评估推荐**: [方案名称]

**理论支持**: [来自官方文档]
**实践验证**: [来自社区反馈]
**数据支撑**: [来自性能测试和采用趋势]

**推理链**:
1. [基于理论的分析]
2. [基于实践的验证]
3. [基于数据的确认]
4. [综合结论]

[其余同标准模板]
```

#### 代码库审查输出模板（--review-codebase）

```markdown
# 代码库审查报告

## 📊 Review Summary

**代码库概览**:
- **技术栈**: [主要语言和框架]
- **项目规模**: [文件数、代码行数]
- **审查范围**: [审查的部分和限制]

**整体健康评估**: [优秀/良好/一般/需改进/差] - [评分: X/100]

## 🔍 Key Findings

### 🔴 Critical Issues (需立即处理)
1. **[问题名称]**
   - **位置**: [文件:行号]
   - **严重性**: Critical
   - **影响**: [说明]
   - **解决方案**: [具体方案]

### 🟠 High Priority Issues (高优先级)
[同上结构]

### 🟡 Medium Priority Issues (中等优先级)
[同上结构]

### 🟢 Low Priority Issues (低优先级)
[同上结构]

## 💡 Positive Aspects

- ✅ [好的实践1]
- ✅ [好的实践2]
- ✅ [好的实践3]

## 📋 Recommendations

### Immediate Actions (立即行动)
1. [关键问题修复]
2. [安全漏洞修复]
3. [数据完整性修复]

### Medium-term Improvements (中期改进)
1. [架构调整]
2. [代码质量提升]
3. [性能优化]

### Long-term Planning (长期规划)
1. [技术债务清理]
2. [架构重构]
3. [测试覆盖提升]

## 📝 Updated TASK.md

[完整的TASK.md更新内容，包含优先级任务和具体解决方案]

## ⏭️ 建议下一步

**推荐路径**: 路径 4 (修复问题)
**理由**: 代码库审查发现了 [X] 个关键问题和 [Y] 个高优先级问题
**下一命令**: `/wf_06_debug "修复关键问题"` 或 `/wf_09_refactor "代码重构"`
```

### 执行检查清单（强制验证）

AI在输出结果前必须确认以下所有项：

- [ ] ✅ 已读取 docs/guides/wf_04_ask_workflows.md
- [ ] ✅ 已完成 Confidence Check 并输出评估结果
- [ ] ✅ 已根据决策树选择MCP模式并说明理由
- [ ] ✅ 已加载项目上下文（PLANNING.md, KNOWLEDGE.md）
- [ ] ✅ 如果是技术选型，已完成开源方案调研（3+个候选方案）
- [ ] ✅ 输出格式完全符合对应场景的标准模板
- [ ] ✅ 已根据后续路径决策树选择并说明下一步
- [ ] ✅ 已添加明确的后续命令和替代选项
- [ ] ✅ 遵循CLAUDE.md语言规范

**如果任何检查项未通过，必须重新执行对应步骤**

### 故障排除

| 问题 | 解决方案 |
|------|------------|
| PLANNING.md不存在 | 提示运行 `/wf_01_planning` 建立项目规划 |
| KNOWLEDGE.md中无类似决策 | 标注为新决策，建议记录到ADR |
| 问题表述不清楚 | Confidence Check 低于70%，暂停并询问 |
| MCP工具不可用 | 自动降级到标准咨询模式，警告功能受限 |
| 无法找到开源方案 | 说明研究不足，建议使用 /wf_04_research 深度调研 |
| 代码库审查失败 | 检查项目结构，提供基本建议 |

---

## 📌 工作流位置指示

### 完整开发流程

当使用此命令时，你正在执行标准开发流程的以下阶段：

```
[项目启动] → [任务规划] → [加载上下文] → [架构咨询 ← 当前] → [代码实现] → [测试验证] → [代码审查] → [提交保存]
  STEP 0       STEP 0.5        STEP 1            STEP 2                STEP 3       STEP 4       STEP 5      STEP 6
```

### 阶段详细说明

| 阶段 | 命令 | 职责 | 状态 |
|------|------|------|------|
| **STEP 0** | `/wf_01_planning` | 项目规划和架构设计 | ✅ 已完成 |
| **STEP 0.5** | `/wf_02_task` | 任务确认和标记 | ✅ 已完成 |
| **STEP 1** | `/wf_03_prime` | 加载项目上下文 | ✅ 已完成 |
| **STEP 2** | `/wf_04_ask` | **架构咨询** | ⏳ 当前执行 |
| **STEP 3** | `/wf_05_code` | 代码实现 | ⏭️ 下一步选项 |
| **STEP 4** | `/wf_07_test` | 测试验证 | ⏭️ 后续步骤 |
| **STEP 5** | `/wf_08_review` | 代码审查 | ⏭️ 后续步骤 |
| **STEP 6** | `/wf_11_commit` | 提交保存 | ⏭️ 最终步骤 |

---

## ✅ 已完成的步骤

### 在执行 `/wf_04_ask` 前，你应该已经完成：

#### 1. ✅ 项目规划 (`/wf_01_planning`)

- **职责**: 建立项目架构和技术栈
- **检查**:
  - ✅ PLANNING.md 存在且包含技术栈决策
  - ✅ 架构方向明确
  - ✅ 开发标准已定义

#### 2. ✅ 任务确认（可选，`/wf_02_task`）

- **职责**: 任务列表已生成
- **检查**:
  - ✅ 如果有明确任务，已在TASK.md中标记
  - ✅ 如果是探索性咨询，可以跳过此步骤

#### 3. ✅ 加载上下文 (`/wf_03_prime`)

- **职责**: 项目上下文已加载
- **检查**:
  - ✅ PLANNING.md、KNOWLEDGE.md 已加载到上下文
  - ✅ 了解项目当前状态

---

## 📝 当前步骤（STEP 2）

### 正在执行: `/wf_04_ask <TECHNICAL_QUESTION> [--review-codebase]`

### 核心职责

| 职责 | 说明 | 检查清单 |
|------|------|---------|
| **评估信心** | Confidence Check 确定咨询方向 | ✅ 信心水平评估完成 |
| **调研方案** | 优先开源成熟方案 | ✅ 3+个候选方案对比 |
| **整合上下文** | 对齐项目架构和约束 | ✅ PLANNING.md 约束考虑 |
| **提供建议** | 明确推荐和理由 | ✅ 推荐方案清晰 |
| **记录决策** | 重大决策记录到ADR | ✅ 决策文档化 |

### 可选增强

- **--think**: 使用 Sequential-thinking MCP 进行结构化多步推理
- **--c7**: 使用 Context7 MCP 获取官方文档和最佳实践
- **--research**: 使用 Tavily MCP 搜索最新社区反馈和趋势
- **--review-codebase**: 全面代码库审查和质量分析

---

## ⏭️ 建议下一步

### 架构咨询完成后，建议按以下顺序执行

### 路径 1：直接进入代码实现（推荐）✅

**适用场景**: 咨询已解决问题，可以直接编码

```bash
# Step 3: 开始功能实现
/wf_05_code "实现已决策的功能"

# Step 4: 添加测试
/wf_07_test "编写测试验证"

# Step 5: 代码审查
/wf_08_review

# Step 6: 提交保存进度
/wf_11_commit "feat: [功能描述]"
```

**优势**:
- ✅ 咨询已提供明确方向，无需额外讨论
- ✅ 可以立即开始编码，节省时间
- ✅ 后续步骤清晰，流程顺畅

---

### 路径 2：更新规划和设计

**适用场景**: 咨询建议需要更新项目规划和架构

```bash
# Step 3: 更新项目规划
/wf_01_planning "根据咨询结果更新架构和技术栈"

# Step 4: 重新加载上下文
/wf_03_prime

# Step 5: 开始实现
/wf_05_code "实现更新后的功能"
```

**优势**:
- ✅ 保持PLANNING.md与实际决策同步
- ✅ 为团队提供最新的架构文档
- ✅ 避免未来的架构冲突

---

### 路径 3：进行深度研究和对比

**适用场景**: 面对重大技术决策需要深度研究

```bash
# Step 3: 执行深度研究
/wf_04_research "深度研究并对比技术方案"

# Step 4: 回到咨询
/wf_04_ask "根据研究结果进行最终决策"

# Step 5: 更新规划并实现
/wf_01_planning "更新基于研究的决策"
/wf_05_code "开始实现"
```

**优势**:
- ✅ 系统化评估多个方案
- ✅ 获取更深入的技术细节
- ✅ 做出更有信心的决策

---

### 路径 4：发现代码质量问题

**适用场景**: 使用 `--review-codebase` 进行代码审查时发现问题

```bash
# Step 3: 根据优先级修复
# 如果发现 bug
/wf_06_debug "修复发现的 bug"

# 如果需要重构
/wf_09_refactor "根据建议进行代码重构"

# Step 4: 测试验证修改
/wf_07_test "测试验证修改"

# Step 5: 提交
/wf_11_commit "fix: [修复描述]"
```

**警告**:
- ⚠️ 优先处理 🔴 Critical 和 🟠 High Priority 问题
- ⚠️ 确保修复不引入新问题
- ⚠️ 充分测试后再提交

---

## 📊 工作流进度提示

### 当你完成架构咨询时，确保输出中包含：

#### ✅ 已完成检查清单

- ✅ **Confidence Assessment完成**
  - 信心水平评估明确
  - 决策路径清晰（直接执行/备选方案/暂停询问）

- ✅ **问题分析完成**
  - 问题类型识别准确
  - 项目上下文整合充分

- ✅ **开源方案调研完成**（如果是技术选型）
  - 至少3个候选方案对比
  - 优劣势分析清晰
  - License兼容性确认

- ✅ **推荐方案明确**
  - 推荐理由充分
  - 风险说明清楚
  - 后续行动具体

#### ⏭️ 下一步提示检查清单

- 📋 **显示推荐的下一个命令**
  - 根据决策树选择路径（1/2/3/4）
  - 明确下一步的命令和参数

- 💡 **说明选择的原因**
  - 为什么推荐此路径
  - 有什么潜在风险需要注意

- 🔄 **提供替代选项**
  - 列出其他可行的工作流路径
  - 说明适用场景

---

## 💡 决策指南

### 我应该执行哪个路径？

| 情况 | 建议选项 | 命令序列 | 原因 |
|------|---------|---------|------|
| **咨询已解决问题，可直接编码** | 路径 1 | `/wf_05_code` → `/wf_07_test` → `/wf_08_review` → `/wf_11_commit` | 方向明确，立即实施 |
| **咨询建议更新项目规划和架构** | 路径 2 | `/wf_01_planning` → `/wf_03_prime` → `/wf_05_code` | 保持文档同步 |
| **面对重大技术决策需要深度研究** | 路径 3 | `/wf_04_research` → `/wf_04_ask` → `/wf_01_planning` → `/wf_05_code` | 系统化评估 |
| **代码库审查发现问题** | 路径 4 | `/wf_06_debug` 或 `/wf_09_refactor` → `/wf_07_test` → `/wf_11_commit` | 优先修复问题 |
| **不确定** | 咨询 | `/wf_04_research "深度研究"` | 获取更多信息 |

### 决策因素

#### 选择路径 1 的条件：

- ✅ 咨询已提供明确的技术方案
- ✅ 推荐方案与现有架构兼容
- ✅ 没有重大架构变更需求
- ✅ 可以立即开始编码

#### 选择路径 2 的条件：

- ✅ 咨询建议引入新的技术栈
- ✅ 架构需要调整以支持新功能
- ✅ 技术决策影响多个模块
- ✅ 需要团队对齐架构变更

#### 选择路径 3 的条件：

- ✅ 面对多个候选方案，难以决策
- ✅ 需要更深入的技术细节
- ✅ 涉及重大长期技术投资
- ✅ 需要全面的方案对比

#### 选择路径 4 的条件：

- ✅ 使用了 `--review-codebase` 标志
- ✅ 发现了 🔴 Critical 或 🟠 High Priority 问题
- ✅ 代码质量影响新功能开发
- ✅ 需要先修复技术债务

---

## 🔄 回到上一步

### 如果需要重新加载上下文

```bash
# 返回上下文加载
/wf_03_prime

# 修改后继续咨询
/wf_04_ask "重新咨询问题..."
```

### 常见回退场景

| 场景 | 回退到 | 原因 |
|------|-------|------|
| **上下文信息不足** | `/wf_03_prime` | 重新加载最新项目状态 |
| **需要先建立规划** | `/wf_01_planning` | 项目缺少架构基础 |
| **问题需要澄清** | 询问用户 | 表述不清楚，无法准确回答 |

---

## 📚 相关文档

| 文档 | 用途 | 路径 |
|------|------|------|
| **工作流指南** | 完整工作流说明 | [WORKFLOWS.md](../../WORKFLOWS.md) |
| **项目规划** | 架构和技术栈 | PLANNING.md |
| **知识库** | 历史决策和模式 | [KNOWLEDGE.md](../../KNOWLEDGE.md) |
| **设计哲学** | Ultrathink 设计思维 | [PHILOSOPHY.md](../../PHILOSOPHY.md) |
| **主命令文档** | `/wf_04_ask` 完整说明 | [wf_04_ask.md](../../wf_04_ask.md) |

---

## 快速参考

### MCP模式速查

```
标准咨询:
  - 无MCP标志
  - 基于项目上下文的基础建议

--think 模式:
  - Sequential-thinking MCP
  - 结构化多步推理
  - 系统化权衡分析

--c7 模式:
  - Context7 MCP
  - 官方文档和最佳实践
  - API参考和版本信息

--research 模式:
  - Tavily MCP
  - 最新社区反馈
  - 性能数据和采用趋势

--review-codebase 模式:
  - 代码库全面审查
  - 优先级任务生成
  - 更新TASK.md

组合模式 (--think --c7 --research):
  - 综合分析
  - 多维度评估
  - 高信心推荐
```

### 后续路径速查

```
咨询完成
  ↓
┌─────────────────────────────────────┐
│ 咨询已解决问题，可以直接编码？      │
├─────────────────────────────────────┤
│ YES → 路径 1: /wf_05_code           │
│ NO  → 继续                          │
└─────────────────────────────────────┘
  ↓
┌─────────────────────────────────────┐
│ 咨询建议需要更新项目规划？          │
├─────────────────────────────────────┤
│ YES → 路径 2: /wf_01_planning       │
│ NO  → 继续                          │
└─────────────────────────────────────┘
  ↓
┌─────────────────────────────────────┐
│ 面对重大技术决策需要深度研究？      │
├─────────────────────────────────────┤
│ YES → 路径 3: /wf_04_research       │
│ NO  → 继续                          │
└─────────────────────────────────────┘
  ↓
┌─────────────────────────────────────┐
│ 代码库审查发现问题？                │
├─────────────────────────────────────┤
│ YES → 路径 4: /wf_06_debug          │
│ NO  → 默认路径 1                    │
└─────────────────────────────────────┘
```

### 常用命令组合

**标准咨询流程**:
```bash
/wf_03_prime
/wf_04_ask "技术问题"
/wf_05_code "实现功能"
/wf_07_test "添加测试"
/wf_08_review
/wf_11_commit "feat: 功能实现"
```

**深度技术决策流程**:
```bash
/wf_03_prime
/wf_04_ask "技术选型问题" --think --c7 --research
/wf_04_research "深度评估方案" (如果需要)
/wf_01_planning "更新技术栈决策"
/wf_05_code "实现选定方案"
```

**代码库审查流程**:
```bash
/wf_03_prime
/wf_04_ask "代码库审查" --review-codebase
/wf_06_debug "修复关键问题" (根据审查结果)
/wf_09_refactor "代码重构" (根据审查建议)
/wf_07_test "测试验证"
/wf_11_commit "fix: 代码质量改进"
```

---

## 相关内容

详见:
- [wf_04_ask.md](../../wf_04_ask.md) - 主命令文档
- [WORKFLOWS.md](../../WORKFLOWS.md) - 完整工作流说明
- [KNOWLEDGE.md](../../KNOWLEDGE.md) - 知识库和决策索引
- [PHILOSOPHY.md](../../PHILOSOPHY.md) - 设计哲学和原则
