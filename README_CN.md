# Claude Code 工作流命令系统 (wf_*)

一套为 Claude Code 设计的综合闭环工作流系统，集成了项目规划、任务管理和开发最佳实践。

## 🎯 目标

该命令套件提供了结构化的工作流程：
- 使用 PLANNING.md 和 TASK.md 在会话间维护上下文
- 通过 `/clear` 边界实现工作连续性
- 自动跟踪整个开发过程的进度
- 执行一致的模式和质量标准
- 创建从规划到部署的完整开发循环

## 🚀 快速开始

1. **初始化项目**
   ```bash
   @wf_planning.md 我的项目
   @wf_task.md create
   ```

2. **开始工作会话**
   ```bash
   @wf_prime.md  # 加载项目上下文
   ```

3. **开发功能**
   ```bash
   @wf_code.md 实现用户认证功能
   @wf_test.md 认证模块
   @wf_commit.md
   ```

4. **中断后继续**
   ```bash
   /clear  # 当上下文过大时清理
   @wf_prime.md  # 重新加载并继续
   ```

## 📁 命令分类

### 🔄 核心工作流
| 命令 | 用途 |
|---------|---------|
| `wf_prime.md` | 从 PLANNING.md 和 TASK.md 加载项目上下文 |
| `wf_planning.md` | 创建/更新项目架构文档 |
| `wf_task.md` | 管理任务跟踪和进度 |

### 💻 开发
| 命令 | 用途 |
|---------|---------|
| `wf_code.md` | 实现与架构对齐的功能 |
| `wf_ask.md` | 在项目上下文中获取架构咨询 |
| `wf_debug.md` | 系统化地调试问题 |
| `wf_refactor.md` | 改进代码结构 |

### ✅ 质量保证
| 命令 | 用途 |
|---------|---------|
| `wf_test.md` | 创建和运行测试 |
| `wf_review.md` | 根据标准审查代码 |
| `wf_optimize.md` | 优化性能 |
| `wf_coverage.md` | 分析测试覆盖率 |

### 🔧 运维
| 命令 | 用途 |
|---------|---------|
| `wf_deploy_check.md` | 验证部署准备情况 |
| `wf_commit.md` | 带任务跟踪的提交 |
| `wf_format.md` | 按标准格式化代码 |
| `wf_fix.md` | 修复错误并记录 |

## 🔄 工作流示例

### 完整功能开发
```bash
# 1. 架构咨询
@wf_ask.md 如何设计认证系统的架构？

# 2. 实现
@wf_code.md 实现基于JWT的认证

# 3. 测试
@wf_test.md 认证接口

# 4. 审查
@wf_review.md 认证模块

# 5. 提交
@wf_format.md
@wf_commit.md feat: 添加JWT认证

# 6. 更新任务
@wf_task.md update
```

### Bug 修复流程
```bash
# 1. 调试
@wf_debug.md 用户登录时出现500错误

# 2. 修复
@wf_code.md 修复认证服务中的竞态条件

# 3. 测试
@wf_test.md 并发登录场景

# 4. 提交
@wf_commit.md fix: 解决登录竞态条件
```

### 会话管理
```bash
# 开始一天的工作
@wf_prime.md
@wf_task.md review

# ... 功能开发 ...

# 休息前
@wf_task.md update
@wf_commit.md

# 休息后（新会话）
/clear
@wf_prime.md
# 从中断处继续
```

## 📋 关键文件

### PLANNING.md
架构蓝图，包含：
- 项目概述和目标
- 系统架构
- 技术决策
- 开发标准
- 测试策略

### TASK.md
动态进度跟踪器，包含：
- 分类任务列表
- 当前状态
- 依赖关系
- 完成历史

## 🏗️ 设置

1. **在项目中创建命令目录：**
   ```bash
   mkdir -p .claude/commands
   ```

2. **复制所有 wf_*.md 文件到命令目录**

3. **初始化项目：**
   ```bash
   @wf_planning.md 你的项目名称
   @wf_task.md create
   ```

4. **开始开发！**

## 💡 最佳实践

1. **清理上下文后始终加载** - `/clear` 后运行 `@wf_prime.md`
2. **保持任务更新** - 工作时定期更新 TASK.md
3. **记录决策** - 架构变更更新到 PLANNING.md
4. **持续测试** - 修改后运行测试
5. **提交前审查** - 使用 `@wf_review.md` 进行质量检查
6. **保持格式一致** - 提交前运行 `@wf_format.md`

## 🔍 命令集成

每个命令都与其他命令集成：
- 命令从 PLANNING.md 读取上下文
- 工作更新记录在 TASK.md 中
- 标准一致性地执行
- 进度在工作流中流转

## 📊 工作流优势

- **上下文保持**: 跨会话顺畅工作
- **进度跟踪**: 始终了解完成情况和下一步
- **质量执行**: 自动应用一致的标准
- **减少开销**: 最小化上下文重复
- **完整循环**: 从规划到部署的一体化系统

## 🛠️ 故障排除

### 丢失上下文？
```bash
@wf_prime.md  # 重新加载所有内容
```

### 需求不明确？
```bash
@wf_ask.md [你的问题]
```

### 需要质量检查？
```bash
@wf_review.md [范围]
@wf_coverage.md
```

### 准备部署？
```bash
@wf_deploy_check.md production
```

## 📈 持续改进

系统通过以下方式演进：
- 定期更新 PLANNING.md
- 任务模式分析
- 命令优化
- 工作流改进

## 🔑 核心理念

### 1. 上下文持久化
通过 PLANNING.md（架构文档）和 TASK.md（任务跟踪）保存项目状态，即使在 `/clear` 后也能快速恢复工作状态。

### 2. 闭环工作流
每个命令都是整体工作流的一部分：
- 规划 → 开发 → 测试 → 审查 → 部署
- 每步都更新相应文档
- 自动维护项目连续性

### 3. 智能上下文管理
```bash
长时间工作 → 上下文变大 → /clear 清理 → @wf_prime.md 恢复 → 继续工作
```

### 4. 任务驱动开发
- 所有工作都与 TASK.md 中的任务关联
- 自动跟踪进度
- 清晰的依赖关系管理

## 📚 使用场景

### 新项目启动
1. 创建项目规划
2. 生成任务列表
3. 开始迭代开发

### 日常开发
1. 加载上下文
2. 选择任务
3. 开发-测试-提交循环
4. 更新进度

### 代码维护
1. 审查现有代码
2. 识别改进点
3. 重构和优化
4. 验证无回归

### 紧急修复
1. 快速调试
2. 实施修复
3. 验证解决
4. 记录经验

## 🎯 设计目标

1. **最小化上下文负担** - 通过文档持久化减少重复
2. **最大化工作连续性** - 无缝跨会话工作
3. **自动化质量保证** - 内置标准执行
4. **透明进度跟踪** - 实时了解项目状态
5. **灵活且可扩展** - 适应不同项目需求

---

**注意**: 所有命令使用 `wf_` 前缀以区别于其他命令系统。这确保了清晰的命名空间分离和工作流命令的易识别性。

## 联系与反馈

如有问题或建议，请通过项目仓库提交 Issue 或 Pull Request。