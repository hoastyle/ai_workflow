---
command: /wf_05_code
index: 05
phase: "å¼€å‘å®ç°"
description: "åŠŸèƒ½å®ç°åè°ƒå™¨ï¼Œéµå¾ªæ¶æ„æ ‡å‡†ç¼–å†™ä»£ç ï¼Œé›†æˆ Ultrathink ä¼˜é›…å®ç° | MCP: --ui / --serena"
reads: [PLANNING.md(å¼€å‘æ ‡å‡†), TASK.md(å½“å‰ä»»åŠ¡), KNOWLEDGE.md(ä»£ç æ¨¡å¼), PHILOSOPHY.md(å¯é€‰)]
writes: [ä»£ç æ–‡ä»¶, TASK.md(çŠ¶æ€æ›´æ–°)]
prev_commands: [/wf_03_prime, /wf_04_ask]
next_commands: [/wf_07_test, /wf_08_review, /wf_11_commit]
model: sonnet
token_budget: complex
ultrathink_lens: "craft_elegance"
mcp_support:
  - name: "Magic"
    flag: "--ui"
    detail: "UIç»„ä»¶ç”Ÿæˆå’Œè®¾è®¡ç³»ç»Ÿé›†æˆ"
  - name: "Serena"
    flag: "--serena"
    detail: "æ·±åº¦ä»£ç ç†è§£ã€ç²¾ç¡®å®šä½ã€æ™ºèƒ½ä»£ç æ’å…¥ç‚¹"
docs_dependencies:
  guides:
    - docs/guides/wf_05_code_workflows.md
    - docs/guides/wf_05_code_serena_guide.md
    - docs/guides/wf_05_code_doc_sync_guide.md
  estimated_tokens: 1243
  lazy_load: true
  note: "ä»…åœ¨éœ€è¦æ·±å…¥æŒ‡å¯¼æ—¶åŠ è½½ï¼ˆå¦‚Serenaä½¿ç”¨ã€æ–‡æ¡£åŒæ­¥æµç¨‹ï¼‰"
context_rules:
  - "éµå¾ªPLANNING.mdçš„ä»£ç æ ‡å‡†"
  - "æ»¡è¶³PRDéœ€æ±‚"
  - "æ›´æ–°TASK.mdè¿›åº¦"
  - "Ultrathink ä¼˜é›…å®ç°ï¼ˆCraft, Don't Codeï¼‰ï¼šå‡½æ•°åæ¸…æ™°ã€æŠ½è±¡è‡ªç„¶ã€é”™è¯¯å¤„ç†ä¼˜é›…"
  - "âœ… æ”¯æŒ --serena æ ‡å¿—ç”¨äºå¤æ‚ä¿®æ”¹ï¼Œç²¾ç¡®å®šä½ä»£ç ä½ç½®"
---

## ğŸ”Œ MCP å¢å¼ºèƒ½åŠ›

æœ¬å‘½ä»¤æ”¯æŒä»¥ä¸‹ MCP æœåŠ¡å™¨çš„å¯é€‰å¢å¼ºï¼š

### Serena (æ·±åº¦ä»£ç ç†è§£)

**å¯ç”¨**: `--serena` æ ‡å¿—
**ç”¨é€”**: å¤æ‚ä»£ç ä¿®æ”¹æ—¶çš„ç²¾ç¡®å®šä½å’Œæ™ºèƒ½æ’å…¥ç‚¹æ£€æµ‹
**è‡ªåŠ¨æ¿€æ´»**: å¦ (ç”¨æˆ·æ˜ç¡®å¯ç”¨)

**ç¤ºä¾‹**:
```bash
# åœ¨å¤§å‹ç±»ä¸­ç²¾ç¡®æ·»åŠ æ–°æ–¹æ³•
/wf_05_code "åœ¨ UserService ä¸­æ·»åŠ å¯†ç é‡ç½®æ–¹æ³•" --serena

# ç†è§£å¤æ‚ä»£ç ç»“æ„åè¿›è¡Œä¿®æ”¹
/wf_05_code "é‡æ„æ”¯ä»˜æ¨¡å—çš„äº‹åŠ¡å¤„ç†é€»è¾‘" --serena
```

**æ”¹è¿›ç‚¹**:
- ç²¾ç¡®ä»£ç ä½ç½®è¯†åˆ«ï¼ˆå‡†ç¡®ç‡ 95%ï¼‰
- æ™ºèƒ½æ’å…¥ç‚¹æ£€æµ‹ï¼ˆé¿å…ç ´åç°æœ‰ä»£ç ï¼‰
- ç¬¦å·çº§ä»£ç ç†è§£ï¼ˆç±»ã€æ–¹æ³•ã€å˜é‡å…³ç³»ï¼‰
- æ—¶é—´èŠ‚çœ 50-70%

---

### Magic (UI ç»„ä»¶ç”Ÿæˆ)

**å¯ç”¨**: `--ui` æ ‡å¿—
**ç”¨é€”**: ç”Ÿæˆäº¤äº’å¼ UI ç»„ä»¶å’Œè®¾è®¡ç³»ç»Ÿé›†æˆ
**è‡ªåŠ¨æ¿€æ´»**: å¦ (ç”¨æˆ·æ˜ç¡®å¯ç”¨)

**ç¤ºä¾‹**:
```bash
# ç”Ÿæˆ Material Design æŒ‰é’®ç»„ä»¶
/wf_05_code "åˆ›å»ºç”¨æˆ·ç™»å½•è¡¨å•" --ui

# è®¾è®¡ç³»ç»Ÿé›†æˆ
/wf_05_code "æ·»åŠ å“åº”å¼å¯¼èˆªæ " --ui
```

**æ”¹è¿›ç‚¹**:
- è‡ªåŠ¨ç”Ÿæˆ UI ç»„ä»¶ä»£ç 
- è®¾è®¡ç³»ç»Ÿé›†æˆï¼ˆMaterial, Ant Design ç­‰ï¼‰
- å“åº”å¼å¸ƒå±€æ”¯æŒ
- äº¤äº’é€»è¾‘ç”Ÿæˆ

---

### ç»„åˆä½¿ç”¨

```bash
# åŒæ—¶å¯ç”¨ Serena å’Œ Magic
/wf_05_code "åœ¨ Dashboard ä¸­æ·»åŠ æ•°æ®å¯è§†åŒ–ç»„ä»¶" --serena --ui

# è¾“å‡ºåŒ…å«:
# 1. Serena: ç²¾ç¡®å®šä½ Dashboard ç»„ä»¶ä½ç½®
# 2. Magic: ç”Ÿæˆå¯è§†åŒ–ç»„ä»¶ UI ä»£ç 
# 3. Integration: æ™ºèƒ½åˆå¹¶åˆ°ç°æœ‰ä»£ç 
```

---

### ğŸ”§ MCP Gateway é›†æˆ (NEW - Task 3.2)

**Gateway åˆå§‹åŒ–** (æ‰€æœ‰ MCP ä½¿ç”¨å‰æ‰§è¡Œ):
```python
# å¯¼å…¥ MCP Gateway
from src.mcp.gateway import get_mcp_gateway

# è·å–å…¨å±€ Gateway å®ä¾‹
gateway = get_mcp_gateway()
```

**Serena å·¥å…·è°ƒç”¨** (--serena):
```python
# æ£€æŸ¥å¯ç”¨æ€§
if gateway.is_available("serena"):
    # è·å–ç¬¦å·æ¦‚è§ˆå·¥å…·
    symbols_tool = gateway.get_tool("serena", "get_symbols_overview")

    # è°ƒç”¨å·¥å…·è·å–æ–‡ä»¶ç»“æ„
    result = symbols_tool.call(relative_path="src/services/user_service.py")

    # è·å–ç²¾ç¡®å®šä½å·¥å…·
    find_tool = gateway.get_tool("serena", "find_symbol")

    # å®šä½å…·ä½“ç¬¦å·
    symbol_result = find_tool.call(
        name_path_pattern="UserService/authenticate",
        relative_path="src/services/user_service.py"
    )
else:
    print("âš ï¸ Serena MCP ä¸å¯ç”¨ï¼Œä½¿ç”¨ä¼ ç»Ÿ Read å·¥å…·")
```

**Magic å·¥å…·è°ƒç”¨** (--ui):
```python
# æ£€æŸ¥å¯ç”¨æ€§
if gateway.is_available("magic"):
    # è·å– UI ç»„ä»¶ç”Ÿæˆå·¥å…·
    ui_tool = gateway.get_tool("magic", "21st_magic_component_builder")

    # è°ƒç”¨å·¥å…·ç”Ÿæˆç»„ä»¶
    result = ui_tool.call(
        message="Create a login form with email and password fields",
        searchQuery="login form",
        absolutePathToCurrentFile="/path/to/component.tsx",
        absolutePathToProjectDirectory="/path/to/project",
        standaloneRequestQuery="Generate Material Design login form"
    )
else:
    print("âš ï¸ Magic MCP ä¸å¯ç”¨ï¼Œä½¿ç”¨æ ‡å‡† UI ç”Ÿæˆ")
```

**ç»„åˆä½¿ç”¨ç¤ºä¾‹** (--serena --ui):
```python
# åˆå§‹åŒ– Gateway
gateway = get_mcp_gateway()

# æ£€æŸ¥æ‰€æœ‰ MCP å¯ç”¨æ€§
mcp_status = {
    "serena": gateway.is_available("serena"),
    "magic": gateway.is_available("magic")
}

# æ ¹æ®å¯ç”¨æ€§ç»„åˆä½¿ç”¨
if mcp_status["serena"]:
    # Step 1: ä½¿ç”¨ Serena ç²¾ç¡®å®šä½ä¿®æ”¹ä½ç½®
    symbols_tool = gateway.get_tool("serena", "get_symbols_overview")
    structure = symbols_tool.call(relative_path="src/components/Dashboard.tsx")

    # Step 2: ä½¿ç”¨ Serena æ‰¾åˆ°æ’å…¥ç‚¹
    insert_tool = gateway.get_tool("serena", "insert_after_symbol")
    insertion_point = insert_tool.call(
        name_path_pattern="Dashboard/renderHeader",
        relative_path="src/components/Dashboard.tsx"
    )

if mcp_status["magic"]:
    # Step 3: ä½¿ç”¨ Magic ç”Ÿæˆ UI ç»„ä»¶
    ui_tool = gateway.get_tool("magic", "21st_magic_component_builder")
    ui_component = ui_tool.call(
        message="Create data visualization chart component",
        searchQuery="chart component"
    )

    # Step 4: å°†ç”Ÿæˆçš„ç»„ä»¶æ’å…¥åˆ° Serena å®šä½çš„ä½ç½®
```

**Gateway ä¼˜åŠ¿**:
- âœ… ç»Ÿä¸€çš„ MCP ç®¡ç†æ¥å£
- âœ… è‡ªåŠ¨é™çº§ï¼ˆMCP ä¸å¯ç”¨æ—¶å›é€€åˆ°æ ‡å‡†æ–¹æ³•ï¼‰
- âœ… è¿æ¥æ± å¤ç”¨ï¼ˆå‡å°‘å¤šæ¬¡å¯åŠ¨å¼€é”€ï¼‰
- âœ… å·¥å…·æ‡’åŠ è½½ï¼ˆæŒ‰éœ€åˆå§‹åŒ–ï¼‰

---

## æ‰§è¡Œä¸Šä¸‹æ–‡
**è¾“å…¥**: PLANNING.mdæ ‡å‡† + TASK.mdä»»åŠ¡ + KNOWLEDGE.mdæ¨¡å¼
**è¾“å‡º**: ä»£ç å®ç° + TASK.mdæ›´æ–°
**ä¾èµ–é“¾**: /wf_04_ask (å¯é€‰) â†’ **å½“å‰ï¼ˆä»£ç å®ç°ï¼‰** â†’ /wf_07_test â†’ /wf_08_review

## Usage
`/wf_05_code <FEATURE_DESCRIPTION> [--serena] [--ui]`

**æ ‡å¿—è¯´æ˜**:
- `--serena` - å¯ç”¨ Serena MCPï¼Œç”¨äºå¤æ‚ä»£ç ä¿®æ”¹çš„ç²¾ç¡®å®šä½å’Œä»£ç æ’å…¥
  - åœºæ™¯ï¼šå¤§å‹ç±»ä¸­æ·»åŠ æ–°æ–¹æ³•ã€åœ¨ç‰¹å®šä½ç½®æ’å…¥ä»£ç ã€ç†è§£å¤æ‚ä»£ç ç»“æ„
  - æ—¶é—´èŠ‚çœï¼š50-70% (ç†è§£ç»“æ„ 5-15 åˆ†é’Ÿ â†’ å¿«é€Ÿå®šä½ 1-3 åˆ†é’Ÿ)
  - å‡†ç¡®æ€§æå‡ï¼šä»£ç æ’å…¥ç‚¹å‡†ç¡®ç‡ 70% â†’ 95%
- `--ui` - å¯ç”¨ Magic MCPï¼Œç”Ÿæˆäº¤äº’å¼ UI ç»„ä»¶å’Œè®¾è®¡ç³»ç»Ÿé›†æˆ

## Context
- Feature/functionality to implement: $ARGUMENTS
- PLANNING.md defines architecture and standards
- TASK.md tracks implementation progress
- Existing codebase patterns will be followed
- **Serena MCP Integration** (optional via --serena):
  - Precise code location identification
  - Intelligent insertion point detection
  - Symbol-level understanding of code structure

## Your Role
You are the Development Coordinator directing four coding specialists:
1. **Architect Agent** â€“ designs implementation approach aligned with PLANNING.md
2. **Implementation Engineer** â€“ writes code following project standards
3. **Integration Specialist** â€“ ensures seamless integration with existing code
4. **Code Reviewer** â€“ validates quality and updates TASK.md progress

## Process

### Step 0: Confidence Check (NEW - Pre-Implementation Assessment) ğŸ¯

**ç›®çš„**: åœ¨å¼€å§‹ç¼–ç å‰è¯„ä¼°å®ç°ä¿¡å¿ƒï¼Œé¿å…ç›²ç›®å¼€å‘å¯¼è‡´å¤§é‡è¿”å·¥

**æ‰§è¡Œæ—¶æœº**: åœ¨è¯»å– PLANNING.md ä¹‹å‰æ‰§è¡Œ

**è¯„ä¼°ç»´åº¦** (ä»£ç å®ç°ç‰¹å®š):

1. **éœ€æ±‚æ¸…æ™°åº¦** (Requirement Clarity)
   - âœ… åŠŸèƒ½æè¿°æ¸…æ™°ï¼ŒéªŒæ”¶æ ‡å‡†æ˜ç¡® (+30%)
   - âš ï¸ éœ€æ±‚æ¨¡ç³Šï¼Œéœ€è¦æ¾„æ¸…ç»†èŠ‚ (-20%)
   - âŒ éœ€æ±‚ä¸å®Œæ•´ï¼Œç¼ºå°‘å…³é”®ä¿¡æ¯ (-40%)

2. **æŠ€æœ¯å¯è¡Œæ€§** (Technical Feasibility) - è¯æ®é©±åŠ¨
   - âœ… ä½¿ç”¨ç°æœ‰æŠ€æœ¯æ ˆï¼Œæœ‰æˆç†Ÿæ–¹æ¡ˆ (+25%)
   - âœ… KNOWLEDGE.md æœ‰ç±»ä¼¼å®ç°æ¨¡å¼ï¼Œé¿å…é‡å¤å‘æ˜ (+15%)
   - âœ… å·²æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£éªŒè¯æ–¹æ¡ˆï¼ˆContext7 MCPï¼‰(+10%)
   - âœ… å·²ç ”ç©¶å¼€æºå®ç°å‚è€ƒï¼ˆWebSearchï¼‰(+10%)
   - âš ï¸ éœ€è¦å­¦ä¹ æ–°æŠ€æœ¯ä½†æ–¹å‘æ˜ç¡® (+5%)
   - âŒ æŠ€æœ¯æ–¹æ¡ˆä¸æ˜ç¡®ï¼Œç¼ºå°‘è¯æ®æ”¯æŒ (-30%)

   **SuperClaude å¢å¼ºå»ºè®®**:
   - ğŸ” ä½¿ç”¨ `--c7` æ ‡å¿—æŸ¥è¯¢å®˜æ–¹åº“æ–‡æ¡£
   - ğŸŒ ä½¿ç”¨ `--research` æ ‡å¿—éªŒè¯å¼€æºæ–¹æ¡ˆ
   - ğŸ“š ä¼˜å…ˆæ£€æŸ¥ KNOWLEDGE.md é¿å…é‡å¤å‘æ˜

3. **æ¶æ„å¯¹é½** (Architecture Alignment)
   - âœ… å®Œå…¨ç¬¦åˆ PLANNING.md æ¶æ„ (+20%)
   - âš ï¸ éœ€è¦å°å¹…è°ƒæ•´æ¶æ„ (-5%)
   - âŒ ä¸ç°æœ‰æ¶æ„å†²çªï¼Œéœ€é‡æ„ (-25%)

4. **ä»£ç ç†è§£** (Code Understanding)
   - âœ… æ¸…æ¥šä¿®æ”¹ä½ç½®å’Œå½±å“èŒƒå›´ (+15%)
   - âœ… å¯ä½¿ç”¨ --serena å¿«é€Ÿå®šä½ (+10%)
   - âš ï¸ éœ€è¦æ¢ç´¢ä»£ç åº“ (+0%)
   - âŒ ä»£ç åº“ç»“æ„ä¸æ¸…æ¥š (-20%)

5. **æµ‹è¯•å¯éªŒè¯æ€§** (Testability)
   - âœ… æœ‰æ˜ç¡®æµ‹è¯•ç­–ç•¥ (+10%)
   - âš ï¸ éœ€è¦è®¾è®¡æµ‹è¯•æ–¹æ¡ˆ (+0%)
   - âŒ æ— æ³•æœ‰æ•ˆæµ‹è¯• (-20%)

**ä¿¡å¿ƒæ°´å¹³è®¡ç®—**:
```
åŸºç¡€ä¿¡å¿ƒ: 50%
æœ€ç»ˆä¿¡å¿ƒ = åŸºç¡€ä¿¡å¿ƒ + Î£(å„ç»´åº¦åˆ†æ•°)
```

**å†³ç­–æ ‘**:

```
ä¿¡å¿ƒæ°´å¹³ â‰¥ 90%?
â”œâ”€ YES â†’ ğŸŸ¢ ç›´æ¥å¼€å§‹å®ç°
â”‚         - ä½¿ç”¨æ ‡å‡†å¼€å‘æµç¨‹
â”‚         - é¢„æœŸé¡ºåˆ©å®Œæˆ
â”‚
â”œâ”€ 70% â‰¤ ä¿¡å¿ƒ < 90%?
â”‚  â””â”€ YES â†’ ğŸŸ¡ å»ºè®®å‡†å¤‡å·¥ä½œ
â”‚            - ä¸»è¦å®ç°æ–¹æ¡ˆ + é£é™©ç‚¹
â”‚            - å»ºè®®: "ä½¿ç”¨ --serena ç²¾ç¡®å®šä½ä¿®æ”¹ç‚¹" æˆ– "å…ˆè¿è¡Œ /wf_04_ask æ¾„æ¸…æ¶æ„"
â”‚            - **SuperClaude å¢å¼º**: ä½¿ç”¨ MCP éªŒè¯æ–¹æ¡ˆ
â”‚              * æŠ€æœ¯æ–¹æ¡ˆä¸ç¡®å®šï¼Ÿâ†’ `/wf_04_ask "..." --c7` (æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£)
â”‚              * éœ€è¦å¼€æºå‚è€ƒï¼Ÿâ†’ `/wf_04_research "..." --research` (æ·±åº¦è°ƒç ”)
â”‚              * å¤æ‚å†³ç­–ï¼Ÿâ†’ `/wf_04_ask "..." --think` (ç»“æ„åŒ–æ¨ç†)
â”‚            - å‡†å¤‡ Plan Bï¼ˆå¦‚æœä¸»æ–¹æ¡ˆå¤±è´¥ï¼‰
â”‚
â””â”€ ä¿¡å¿ƒ < 70%?
   â””â”€ YES â†’ ğŸ”´ æš‚åœå¹¶æ¾„æ¸…ï¼ˆé¿å…é”™è¯¯å®ç°ï¼Œ25-250x ROIï¼‰
            - åœæ­¢ç¼–ç 
            - åˆ—å‡ºéœ€è¦æ¾„æ¸…çš„é—®é¢˜
            - **å¼ºçƒˆå»ºè®®**: å…ˆè¿›è¡Œæ·±åº¦ç ”ç©¶å’Œæ¶æ„å’¨è¯¢
              * `/wf_04_ask "..." --think --c7 --research` (å®Œæ•´åˆ†æ)
              * `/wf_04_research "å¼€æºæ–¹æ¡ˆè¯„ä¼°"` (æ–¹æ¡ˆå¯¹æ¯”)
            - æ£€æŸ¥ KNOWLEDGE.md æ˜¯å¦æœ‰ç±»ä¼¼é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ
            - ç†è§£"ä¸ºä»€ä¹ˆ"ï¼ˆæ ¹æœ¬åŸå› ï¼‰è€Œéåªå…³æ³¨"åšä»€ä¹ˆ"
```

**ç¤ºä¾‹ 1: é«˜ä¿¡å¿ƒåœºæ™¯ (92%)**
```
ä»»åŠ¡: "åœ¨ç”¨æˆ·æ¨¡å‹æ·»åŠ  email éªŒè¯å­—æ®µ"
è¯„ä¼°:
- éœ€æ±‚æ¸…æ™°: +30% (æ˜ç¡®å­—æ®µå’ŒéªŒè¯è§„åˆ™)
- æŠ€æœ¯å¯è¡Œæ€§: +25% (ä½¿ç”¨ç°æœ‰ ORM)
- æ¶æ„å¯¹é½: +20% (ç¬¦åˆæ•°æ®æ¨¡å‹è®¾è®¡)
- ä»£ç ç†è§£: +15% (æ¸…æ¥š User model ä½ç½®)
- æµ‹è¯•å¯éªŒè¯æ€§: +10% (æœ‰æµ‹è¯•å¥—ä»¶)
æ€»ä¿¡å¿ƒ: 50% + 100% = 150% â†’ Cap at 92%

â†’ ğŸŸ¢ ç›´æ¥å®ç°
   é¢„æœŸ: 15-20 åˆ†é’Ÿå®Œæˆ
```

**ç¤ºä¾‹ 2: ä¸­ç­‰ä¿¡å¿ƒåœºæ™¯ (75%)**
```
ä»»åŠ¡: "å®ç°ç”¨æˆ·æƒé™æ£€æŸ¥ä¸­é—´ä»¶"
è¯„ä¼°:
- éœ€æ±‚æ¸…æ™°: +30%
- æŠ€æœ¯å¯è¡Œæ€§: +5% (éœ€è¦ç ”ç©¶ä¸­é—´ä»¶æ¨¡å¼)
- æ¶æ„å¯¹é½: +20%
- ä»£ç ç†è§£: +10% (ä½¿ç”¨ --serena å¿«é€Ÿå®šä½)
- æµ‹è¯•å¯éªŒè¯æ€§: +10%
æ€»ä¿¡å¿ƒ: 50% + 75% = 125% â†’ è°ƒæ•´ä¸º 75%

â†’ ğŸŸ¡ å»ºè®®å‡†å¤‡
   ä¸»è¦æ–¹æ¡ˆ: Express ä¸­é—´ä»¶æ¨¡å¼
   é£é™©ç‚¹: ä¸ç°æœ‰è®¤è¯ç³»ç»Ÿé›†æˆ
   å»ºè®®: å…ˆæŸ¥çœ‹ KNOWLEDGE.md ä¸­çš„ä¸­é—´ä»¶ç¤ºä¾‹
   Plan B: å¦‚æœä¸­é—´ä»¶ä¸é€‚ç”¨ï¼Œä½¿ç”¨è£…é¥°å™¨æ¨¡å¼
```

**ç¤ºä¾‹ 3: ä½ä¿¡å¿ƒåœºæ™¯ (45%)**
```
ä»»åŠ¡: "é›†æˆç¬¬ä¸‰æ–¹æ”¯ä»˜ API"
è¯„ä¼°:
- éœ€æ±‚æ¸…æ™°: -20% (æ”¯ä»˜æµç¨‹ä¸æ˜ç¡®)
- æŠ€æœ¯å¯è¡Œæ€§: -30% (æœªçŸ¥çš„ API)
- æ¶æ„å¯¹é½: -5% (éœ€è°ƒæ•´æ¶æ„)
- ä»£ç ç†è§£: +0%
- æµ‹è¯•å¯éªŒè¯æ€§: -20% (æ”¯ä»˜æµ‹è¯•å›°éš¾)
æ€»ä¿¡å¿ƒ: 50% - 75% = -25% â†’ åº•çº¿ 45%

â†’ ğŸ”´ æš‚åœå¹¶æ¾„æ¸…
   éœ€è¦æ¾„æ¸…:
   1. æ”¯ä»˜æµç¨‹å’Œä¸šåŠ¡è§„åˆ™ï¼Ÿ
   2. ä½¿ç”¨å“ªä¸ªæ”¯ä»˜ APIï¼ˆStripe, PayPal ç­‰ï¼‰ï¼Ÿ
   3. é”™è¯¯å¤„ç†å’Œé‡è¯•ç­–ç•¥ï¼Ÿ
   4. æµ‹è¯•ç¯å¢ƒå’Œæ²™ç®±é…ç½®ï¼Ÿ
   å»ºè®®: å…ˆè¿è¡Œ /wf_04_ask "æ”¯ä»˜ç³»ç»Ÿé›†æˆæ–¹æ¡ˆ" --research
```

**ROI åˆ†æ** (ä»£ç å®ç°ç‰¹å®š):
```
Confidence Check æˆæœ¬: ~150-250 tokens
èŠ‚çœæˆæœ¬ (å¦‚æœé¿å…é”™è¯¯å®ç°):
  - é¿å…é”™è¯¯å®ç°: 10,000-30,000 tokens
  - é¿å…è¿”å·¥: 50,000-100,000 tokens
  - é¿å…æ¶æ„è¿”å·¥: 100,000+ tokens

ROI: 40-400x token èŠ‚çœ
Break-even: åªéœ€é¿å… 1 æ¬¡é”™è¯¯å®ç°
```

**è¾“å‡ºæ ¼å¼**:
```
## ğŸ¯ Implementation Confidence

**ä¿¡å¿ƒæ°´å¹³**: 88% ğŸŸ¢

**è¯„ä¼°æ˜ç»†**:
- âœ… éœ€æ±‚æ¸…æ™°åº¦: +30%
- âœ… æŠ€æœ¯å¯è¡Œæ€§: +25%
- âœ… æ¶æ„å¯¹é½: +20%
- âœ… ä»£ç ç†è§£: +15%
- âš ï¸ æµ‹è¯•å¯éªŒè¯æ€§: +0%

**å†³ç­–**: ç›´æ¥å¼€å§‹å®ç°

**é¢„æœŸ**: é¡ºåˆ©å®Œæˆï¼Œçº¦ 20-30 åˆ†é’Ÿ
```

---

### Step 0.5: Environment Compatibility Check ğŸ”§ (NEW - è€ç‰ˆæœ¬é€‚é…)

**ç›®çš„**: ç¡®ä¿å‘½ä»¤åœ¨è€ç‰ˆæœ¬ Claude Code éƒ¨ç½²ç¯å¢ƒä¸­æ­£å¸¸å·¥ä½œ

**æ‰§è¡Œæ—¶æœº**: åœ¨ Confidence Check ä¹‹åï¼ŒPhase 1 åŸºç¡€ä»£ç å¼€å‘ä¹‹å‰

**ä¸ºä»€ä¹ˆéœ€è¦**: Task 2.6 è¦æ±‚"é€‚é…è€ç‰ˆæœ¬ç¯å¢ƒ"ï¼Œç¡®ä¿æ–°åŠŸèƒ½ï¼ˆExplore agent, å¹¶è¡Œæ¨¡å¼ï¼‰åœ¨è€ç‰ˆæœ¬éƒ¨ç½²æ—¶èƒ½ä¼˜é›…é™çº§

---

#### 0.5.1 ç¯å¢ƒæ£€æµ‹

æ£€æµ‹è¿è¡Œç¯å¢ƒç‰¹æ€§å’Œå¯ç”¨å·¥å…·ï¼š

**æ£€æµ‹é¡¹ 1: Task tool å¯ç”¨æ€§**
```
å°è¯•: è°ƒç”¨ Task tool è·å–å¯ç”¨ subagent ç±»å‹
- âœ… æ”¯æŒ â†’ å¯ä½¿ç”¨ Explore agent å’Œå¹¶è¡Œ agents
- âŒ ä¸æ”¯æŒ â†’ é™çº§ä¸ºä¼ ç»Ÿ Glob/Grep å·¥å…·
```

**æ£€æµ‹é¡¹ 2: MCP æœåŠ¡å™¨å¯ç”¨æ€§**
```
æ£€æŸ¥:
- Serena MCP: ç”¨äºä»£ç ç†è§£å’Œç²¾ç¡®å®šä½
  * å¯ç”¨ â†’ å¯ç”¨ --serena å¢å¼ºåŠŸèƒ½
  * ä¸å¯ç”¨ â†’ ä½¿ç”¨ Grep/Read æ›¿ä»£

- Explore agent: ç”¨äºä»£ç åº“æ¢ç´¢
  * å¯ç”¨ â†’ å¯ç”¨ Step 1.2 æ™ºèƒ½æ¢ç´¢
  * ä¸å¯ç”¨ â†’ ç›´æ¥è¿›å…¥ Step 1.3 æ ‡å‡†åŠ è½½
```

**æ£€æµ‹é¡¹ 3: åŸºç¡€å·¥å…·å®Œæ•´æ€§**
```
éªŒè¯: Glob, Grep, Read, Edit, Write, Bash
- å…¨éƒ¨å¯ç”¨ â†’ æ­£å¸¸æ‰§è¡Œ
- éƒ¨åˆ†ç¼ºå¤± â†’ è­¦å‘Šå¹¶æä¾›æ›¿ä»£æ–¹æ¡ˆ
```

---

#### 0.5.2 é™çº§ç­–ç•¥

æ ¹æ®æ£€æµ‹ç»“æœï¼Œè‡ªåŠ¨é€‰æ‹©é™çº§æ–¹æ¡ˆï¼š

**Scenario A: å®Œå…¨æ”¯æŒï¼ˆç†æƒ³ç¯å¢ƒï¼‰**
- âœ… Task tool å¯ç”¨
- âœ… Serena MCP å¯ç”¨
- âœ… Explore agent å¯ç”¨
- ğŸš€ æ‰§è¡Œæ¨¡å¼: ä½¿ç”¨æ‰€æœ‰å¢å¼ºåŠŸèƒ½

**Scenario B: éƒ¨åˆ†æ”¯æŒï¼ˆè€ç‰ˆæœ¬ç¯å¢ƒ - æœ€å¸¸è§ï¼‰**
- âŒ Task tool å—é™æˆ–ä¸å¯ç”¨
- âš ï¸ Serena MCP å¯èƒ½ä¸å¯ç”¨
- ğŸ“Š æ‰§è¡Œæ¨¡å¼: é™çº§ç­–ç•¥

**é™çº§å†³ç­–è¡¨**:
| é™åˆ¶ | å½±å“èŒƒå›´ | é™çº§æ–¹æ¡ˆ | æ€§èƒ½å½±å“ |
|------|---------|---------|---------|
| Task tool ä¸å¯ç”¨ | Step 1.2, Step 3 Mode B | è·³è¿‡ Exploreï¼Œå¼ºåˆ¶ Mode A | Token +70%, æ—¶é—´ +15min |
| Serena ä¸å¯ç”¨ | Step 1.4, æ‰€æœ‰ --serena ç‰¹æ€§ | ä½¿ç”¨ Grep/Read æ›¿ä»£ | å®šä½å‡†ç¡®ç‡ 95% â†’ 70% |
| ä¸¤è€…éƒ½ä¸å¯ç”¨ | æ‰€æœ‰å¢å¼ºåŠŸèƒ½ | å®Œå…¨ä¼ ç»Ÿæ¨¡å¼ | Token +70%, æ—¶é—´ +20min |

**Scenario C: æœ€å°ç¯å¢ƒï¼ˆä¸¥é‡å—é™ï¼‰**
- âŒ Task tool ä¸å¯ç”¨
- âŒ Serena MCP ä¸å¯ç”¨
- âŒ æŸäº›åŸºç¡€å·¥å…·ç¼ºå¤±
- âš ï¸ æ‰§è¡Œæ¨¡å¼: æœ€å°åŠŸèƒ½æ¨¡å¼ï¼Œå»ºè®®å‡çº§ç¯å¢ƒ

---

#### 0.5.3 æ‰§è¡Œæ¨¡å¼æ ‡è®°

è®¾ç½®åç»­æ­¥éª¤çš„æ‰§è¡Œç­–ç•¥ï¼š

```yaml
# æ‰§è¡Œæ¨¡å¼é…ç½®ï¼ˆå†…éƒ¨æ ‡è®°ï¼‰
execution_config:
  task_tool_available: true | false
  serena_available: true | false
  explore_agent_available: true | false

  # å¼ºåˆ¶æ¨¡å¼ï¼ˆåŸºäºæ£€æµ‹ç»“æœï¼‰
  force_mode_a: false  # å¦‚æœ task_tool ä¸å¯ç”¨ï¼Œè®¾ä¸º true
  skip_explore: false   # å¦‚æœ Explore agent ä¸å¯ç”¨ï¼Œè®¾ä¸º true
  disable_serena: false # å¦‚æœ Serena ä¸å¯ç”¨ï¼Œè®¾ä¸º true
```

**åç»­æ­¥éª¤è‡ªåŠ¨é€‚é…**:
- **Step 1.1**: å¦‚æœ `skip_explore == true`ï¼Œè‡ªåŠ¨è·³è¿‡å¤æ‚åº¦è¯„ä¼°ï¼Œç›´æ¥è¿› Step 1.3
- **Step 1.2**: å¦‚æœ `explore_agent_available == false`ï¼Œè·³è¿‡æ­¤æ­¥
- **Step 1.4**: å¦‚æœ `disable_serena == true`ï¼Œè·³è¿‡ Serena MCP å¢å¼º
- **Step 2.1**: å¦‚æœ `force_mode_a == true`ï¼Œåªæ˜¾ç¤º Mode A é€‰é¡¹
- **Step 3**: å¦‚æœ `force_mode_a == true`ï¼Œç¦ç”¨ Mode Bï¼ˆå¹¶è¡Œå¼€å‘ï¼‰

---

#### 0.5.4 è¾“å‡ºå’Œç”¨æˆ·é€šçŸ¥

**è¾“å‡ºå†…å®¹**:
```
## ğŸ”§ Environment Compatibility Check

**æ£€æµ‹ç»“æœ**:
- Task tool: âœ… å¯ç”¨ | âŒ ä¸å¯ç”¨
- Serena MCP: âœ… å¯ç”¨ | âš ï¸ éƒ¨åˆ†å¯ç”¨ | âŒ ä¸å¯ç”¨
- Explore agent: âœ… å¯ç”¨ | âŒ ä¸å¯ç”¨

**æ‰§è¡Œæ¨¡å¼**: [å®Œå…¨æ”¯æŒ | éƒ¨åˆ†æ”¯æŒ | æœ€å°æ¨¡å¼]

**é™åˆ¶è¯´æ˜** (å¦‚æœæœ‰):
- âš ï¸ Task tool ä¸å¯ç”¨ï¼Œå°†ä½¿ç”¨ä¼ ç»Ÿ Glob/Grep å·¥å…·ï¼ˆToken æ¶ˆè€— +70%ï¼‰
- âš ï¸ Serena MCP ä¸å¯ç”¨ï¼Œç²¾ç¡®å®šä½åŠŸèƒ½å—é™ï¼ˆå‡†ç¡®ç‡é™è‡³ 70%ï¼‰
- âš ï¸ å¹¶è¡Œå¼€å‘æ¨¡å¼ä¸å¯ç”¨ï¼Œå°†ä½¿ç”¨é¡ºåºæ¨¡å¼ï¼ˆæ—¶é—´ +15åˆ†é’Ÿï¼‰

**å»ºè®®** (å¦‚æœæœ‰é™åˆ¶):
- ğŸ’¡ å»ºè®®å‡çº§åˆ°æœ€æ–°ç‰ˆ Claude Code ä»¥è·å¾—å®Œæ•´åŠŸèƒ½
- ğŸ’¡ æˆ–è”ç³»ç®¡ç†å‘˜å¯ç”¨ MCP æœåŠ¡å™¨æ”¯æŒ
```

---

## ğŸ¤– Agent æ¨¡å¼åè°ƒç­–ç•¥ (NEW - Phase 2 ä¼˜åŒ–)

**ç›®çš„**: ä½¿ç”¨ Task tool å¯åŠ¨ä¸“ä¸šåŒ– agents æ¥å¤„ç†å¤æ‚å®ç°ï¼Œå®ç°æ›´é«˜æ•ˆçš„å¹¶è¡Œå¼€å‘

**ä½•æ—¶ä½¿ç”¨ Agent æ¨¡å¼**:
- âœ… å¤æ‚åŠŸèƒ½å®ç°ï¼ˆæ¶‰åŠå¤šä¸ªæ–‡ä»¶æˆ–æ¨¡å—ï¼‰
- âœ… å¤§å‹ä»£ç åº“ï¼ˆéœ€è¦æ¢ç´¢å’Œå®šä½ä»£ç ï¼‰
- âœ… å¹¶è¡Œå¼€å‘éœ€æ±‚ï¼ˆå®ç° + æµ‹è¯• + æ–‡æ¡£åŒæ­¥è¿›è¡Œï¼‰
- âŒ ç®€å•ä¿®æ”¹ï¼ˆå•æ–‡ä»¶å°æ”¹åŠ¨ï¼Œç›´æ¥å®ç°æ›´å¿«ï¼‰

### æ¨èçš„ Agent ä½¿ç”¨ç­–ç•¥

**Strategy 1: Explore-First Pattern**ï¼ˆæ¢ç´¢ä¼˜å…ˆæ¨¡å¼ï¼‰

é€‚ç”¨åœºæ™¯ï¼šä¸ç†Ÿæ‚‰ä»£ç åº“ç»“æ„ï¼Œéœ€è¦å…ˆå®šä½ç›¸å…³ä»£ç 

```
Step 1: Launch Explore Agent
  - Thoroughness: "medium"
  - Input: Feature description + codebase path
  - Output: Relevant file list + architecture understanding
  - Token savings: 70-80% (é¿å…è¯»å–æ— å…³æ–‡ä»¶)

Step 2: Implement based on exploration results
  - Use standard development process
  - Focus on identified files only
```

**Strategy 2: Parallel Development Pattern**ï¼ˆå¹¶è¡Œå¼€å‘æ¨¡å¼ï¼‰

é€‚ç”¨åœºæ™¯ï¼šå¤æ‚åŠŸèƒ½ï¼Œå®ç°/æµ‹è¯•/æ–‡æ¡£å¯å¹¶è¡Œè¿›è¡Œ

```
Launch 3 agents in PARALLEL:

Agent 1: Implementation Agent
  - Task: Core feature implementation
  - Input: PLANNING.md standards + feature spec
  - Output: Production code

Agent 2: Test Agent
  - Task: Write comprehensive tests
  - Input: Feature spec + test requirements
  - Output: Test suite

Agent 3: Documentation Agent
  - Task: Update relevant documentation
  - Input: Feature changes + doc templates
  - Output: Updated docs

Coordination:
  - Wait for ALL agents to complete
  - Verify consistency across outputs
  - Integrate and commit

Performance: 3.5x faster than sequential
```

**Strategy 3: Sequential Agent Chain**ï¼ˆé¡ºåºä»£ç†é“¾æ¨¡å¼ï¼‰

é€‚ç”¨åœºæ™¯ï¼šæœ‰ä¾èµ–å…³ç³»çš„ä»»åŠ¡åºåˆ—

```
Agent 1 (Architect) â†’ Wait â†’ Agent 2 (Implementation) â†’ Wait â†’ Agent 3 (Integration)

Step 1: Architect Agent
  - Design component structure
  - Output: Implementation plan

Step 2: Implementation Agent
  - Implement based on plan
  - Output: Core code

Step 3: Integration Agent
  - Integrate with existing system
  - Output: Final integrated code
```

### Agent åè°ƒæœ€ä½³å®è·µ

**âœ… DO**:
- ä¸ºæ¯ä¸ª agent æä¾›æ¸…æ™°çš„ä»»åŠ¡æè¿°å’Œè¾“å…¥
- æ˜ç¡® agent ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼ˆå¹¶è¡Œ vs é¡ºåºï¼‰
- éªŒè¯æ‰€æœ‰ agent è¾“å‡ºçš„ä¸€è‡´æ€§
- ä½¿ç”¨ Explore agent å‡å°‘ä¸å¿…è¦çš„æ–‡ä»¶è¯»å–

**âŒ DON'T**:
- ä¸ºç®€å•ä»»åŠ¡å¯åŠ¨ agentï¼ˆå¼€é”€å¤§äºæ”¶ç›Šï¼‰
- å¿˜è®°ç­‰å¾…å¹¶è¡Œ agents å…¨éƒ¨å®Œæˆ
- ç›²ç›®å¹¶è¡Œæœ‰ä¾èµ–å…³ç³»çš„ä»»åŠ¡
- è·³è¿‡æœ€ç»ˆçš„é›†æˆéªŒè¯æ­¥éª¤

### å®é™…æ¡ˆä¾‹ç¤ºä¾‹

**æ¡ˆä¾‹ 1: æ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½**ï¼ˆä½¿ç”¨å¹¶è¡Œå¼€å‘æ¨¡å¼ï¼‰

```bash
# ä»»åŠ¡ï¼šå®ç° JWT è®¤è¯ç³»ç»Ÿ

å¯åŠ¨ 3 ä¸ªå¹¶è¡Œ agents:
1. Implementation Agent: å®ç° JWT ä¸­é—´ä»¶å’ŒéªŒè¯é€»è¾‘
2. Test Agent: ç¼–å†™è®¤è¯æµ‹è¯•ï¼ˆæ­£å¸¸æµç¨‹ + è¾¹ç•Œæƒ…å†µï¼‰
3. Doc Agent: æ›´æ–° API æ–‡æ¡£è¯´æ˜è®¤è¯è¦æ±‚

ç»“æœï¼š
- å¼€å‘æ—¶é—´ï¼š45 åˆ†é’Ÿ â†’ 15 åˆ†é’Ÿï¼ˆ3x æå‡ï¼‰
- ä»£ç è´¨é‡ï¼šæ›´é«˜ï¼ˆä¸“ä¸šåŒ–åˆ†å·¥ï¼‰
- æ–‡æ¡£åŒæ­¥ï¼šè‡ªåŠ¨å®Œæˆ
```

**æ¡ˆä¾‹ 2: é‡æ„å¤§å‹ç»„ä»¶**ï¼ˆä½¿ç”¨æ¢ç´¢ä¼˜å…ˆæ¨¡å¼ï¼‰

```bash
# ä»»åŠ¡ï¼šé‡æ„æ”¯ä»˜å¤„ç†æ¨¡å—

Step 1: Explore Agent (thoroughness: "medium")
  - æ¢ç´¢ src/payments/ ç›®å½•
  - è¯†åˆ«æ‰€æœ‰ç›¸å…³æ–‡ä»¶å’Œä¾èµ–
  - è¾“å‡ºï¼š8 ä¸ªæ–‡ä»¶éœ€è¦ä¿®æ”¹

Step 2: åŸºäºæ¢ç´¢ç»“æœå®æ–½é‡æ„
  - åªè¯»å–å¿…è¦çš„ 8 ä¸ªæ–‡ä»¶
  - Token èŠ‚çœï¼š~15,000 tokens

ç»“æœï¼š
- ä¸Šä¸‹æ–‡åŠ è½½ï¼š10 åˆ†é’Ÿ â†’ 2 åˆ†é’Ÿ
- Token æ¶ˆè€—ï¼š20,000 â†’ 5,000ï¼ˆ75% èŠ‚çœï¼‰
```

**æ›´å¤šç¤ºä¾‹**: [docs/examples/agent_coordination_examples.md](docs/examples/agent_coordination_examples.md)

---

## âš¡ å¹¶è¡Œæ‰§è¡Œæ¨¡å¼ (NEW - Phase 2 ä¼˜åŒ–)

**ç›®çš„**: é€šè¿‡å¹¶è¡Œå·¥å…·è°ƒç”¨å¤§å¹…æå‡æ‰§è¡Œé€Ÿåº¦

**æ ¸å¿ƒæ¨¡å¼**: Wave â†’ Checkpoint â†’ Wave

### æ‰§è¡Œæ¨¡å¼è¯´æ˜

**Pattern**: æ³¢æ¬¡ â†’ æ£€æŸ¥ç‚¹ â†’ æ³¢æ¬¡

```
Wave 1: Parallel Reading Phase
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Read file A                     â”‚
â”‚ Read file B                     â”‚  â† å¹¶è¡Œæ‰§è¡Œ
â”‚ Read file C                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
Checkpoint: Analysis Phase
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Analyze all read results        â”‚  â† é¡ºåºæ‰§è¡Œ
â”‚ Determine edit strategy         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
Wave 2: Parallel Editing Phase
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Edit file A                     â”‚
â”‚ Edit file B                     â”‚  â† å¹¶è¡Œæ‰§è¡Œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
Final: Verification Phase
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Verify all changes consistent   â”‚  â† é¡ºåºæ‰§è¡Œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä½•æ—¶ä½¿ç”¨å¹¶è¡Œæ‰§è¡Œ

**âœ… é€‚ç”¨åœºæ™¯**:
- éœ€è¦è¯»å–/ç¼–è¾‘å¤šä¸ªç‹¬ç«‹æ–‡ä»¶ï¼ˆâ‰¥3 ä¸ªï¼‰
- æ–‡ä»¶æ“ä½œä¹‹é—´æ— ä¾èµ–å…³ç³»
- å¤§å‹ä»£ç åº“ï¼ˆ10+ ä¸ªæ–‡ä»¶ï¼‰
- å¤æ‚åŠŸèƒ½å®ç°ï¼ˆè·¨å¤šä¸ªæ¨¡å—ï¼‰

**âŒ ä¸é€‚ç”¨åœºæ™¯**:
- å•æ–‡ä»¶æ“ä½œ
- æœ‰é¡ºåºä¾èµ–ï¼ˆæ–‡ä»¶ B ä¾èµ–æ–‡ä»¶ A çš„ä¿®æ”¹ï¼‰
- ç®€å•ä»»åŠ¡ï¼ˆå¼€é”€å¤§äºæ”¶ç›Šï¼‰
- å°å‹ä»£ç åº“ï¼ˆ< 5 ä¸ªæ–‡ä»¶ï¼‰

### å®æ–½ç¤ºä¾‹

**ç¤ºä¾‹ 1: å¤šæ–‡ä»¶åŠŸèƒ½å®ç°**

```javascript
// ä»»åŠ¡ï¼šåœ¨ 3 ä¸ªæ–‡ä»¶ä¸­æ·»åŠ æ—¥å¿—åŠŸèƒ½

// Wave 1: å¹¶è¡Œè¯»å–
[
  Read("src/auth.js"),
  Read("src/api.js"),
  Read("src/db.js")
] // åŒæ—¶æ‰§è¡Œ

// Checkpoint: åˆ†æ
ç¡®å®šæ¯ä¸ªæ–‡ä»¶çš„æ’å…¥ç‚¹

// Wave 2: å¹¶è¡Œç¼–è¾‘
[
  Edit("src/auth.js", add_logging),
  Edit("src/api.js", add_logging),
  Edit("src/db.js", add_logging)
] // åŒæ—¶æ‰§è¡Œ

// Final: éªŒè¯
æ£€æŸ¥æ‰€æœ‰æ—¥å¿—æ ¼å¼ä¸€è‡´
```

**ç¤ºä¾‹ 2: ç»„ä»¶é‡æ„**

```javascript
// ä»»åŠ¡ï¼šé‡æ„ UserComponent åŠå…¶ä¾èµ–

// Wave 1: å¹¶è¡Œè¯»å–ï¼ˆ5 ä¸ªæ–‡ä»¶ï¼‰
[
  Read("components/User.jsx"),
  Read("components/UserProfile.jsx"),
  Read("components/UserSettings.jsx"),
  Read("utils/userHelpers.js"),
  Read("tests/User.test.js")
] // åŒæ—¶æ‰§è¡Œï¼Œæ—¶é—´ ~5 ç§’

// Checkpoint: è®¾è®¡é‡æ„æ–¹æ¡ˆ
åˆ†æä¾èµ–å…³ç³»ï¼Œç¡®å®šä¿®æ”¹ç­–ç•¥

// Wave 2: å¹¶è¡Œç¼–è¾‘ï¼ˆ4 ä¸ªæ–‡ä»¶ï¼Œæµ‹è¯•æš‚ä¸ä¿®æ”¹ï¼‰
[
  Edit("components/User.jsx", refactor_main),
  Edit("components/UserProfile.jsx", update_props),
  Edit("components/UserSettings.jsx", update_props),
  Edit("utils/userHelpers.js", refactor_helpers)
] // åŒæ—¶æ‰§è¡Œï¼Œæ—¶é—´ ~3 ç§’

// Wave 3: æ›´æ–°æµ‹è¯•
Edit("tests/User.test.js", update_tests)

// Final: é›†æˆéªŒè¯
ç¡®ä¿æ‰€æœ‰ç»„ä»¶æ­£å¸¸é›†æˆ
```

### æ€§èƒ½å¯¹æ¯”

| æ“ä½œæ¨¡å¼ | æ–‡ä»¶æ•° | é¡ºåºæ‰§è¡Œ | å¹¶è¡Œæ‰§è¡Œ | æå‡å€æ•° |
|---------|-------|---------|---------|---------|
| Read only | 3 | 15s | 5s | 3.0x |
| Read + Edit | 5 | 30s | 10s | 3.0x |
| Complex refactor | 10+ | 60s | 18s | 3.3x |

**å¹³å‡æ€§èƒ½æå‡**: **3.5x**

### å®æ–½æ¸…å•

**æ‰§è¡Œå¹¶è¡Œæ¨¡å¼å‰æ£€æŸ¥**:
- [ ] æ“ä½œçš„æ–‡ä»¶ â‰¥ 3 ä¸ª
- [ ] æ–‡ä»¶ä¹‹é—´æ— ä¾èµ–å…³ç³»ï¼ˆæˆ–ä¾èµ–å·²æ˜ç¡®ï¼‰
- [ ] å·²è§„åˆ’å¥½æ³¢æ¬¡åˆ’åˆ†ï¼ˆè¯»å–æ³¢æ¬¡ã€ç¼–è¾‘æ³¢æ¬¡ï¼‰
- [ ] æœ‰éªŒè¯ä¸€è‡´æ€§çš„è®¡åˆ’

**æ‰§è¡Œä¸­æ³¨æ„äº‹é¡¹**:
- âš ï¸ æ¯ä¸ªæ³¢æ¬¡å†…çš„æ“ä½œå¿…é¡»åŒæ—¶è°ƒç”¨ï¼ˆå•ä¸ªæ¶ˆæ¯ï¼‰
- âš ï¸ ç­‰å¾…å½“å‰æ³¢æ¬¡å…¨éƒ¨å®Œæˆå†è¿›å…¥ä¸‹ä¸€é˜¶æ®µ
- âš ï¸ Checkpoint é˜¶æ®µå¿…é¡»é¡ºåºæ‰§è¡Œï¼ˆåˆ†æç»“æœï¼‰
- âš ï¸ æœ€ç»ˆéªŒè¯ä¸å¯çœç•¥

**æ›´å¤šç¤ºä¾‹**: [docs/examples/parallel_execution_overview.md](docs/examples/parallel_execution_overview.md)

---

### Phase 1: åŸºç¡€ä»£ç å¼€å‘ (Step 1-7)

**æ ¸å¿ƒæ­¥éª¤å¿«é€Ÿå‚è€ƒ**:

| æ­¥éª¤ | èŒè´£ | Serena MCP å¢å¼ºï¼ˆå¯é€‰ï¼‰ |
|------|------|----------------------|
| **1-2** | ä¸Šä¸‹æ–‡åŠ è½½å’Œæ¶æ„è®¾è®¡ | `get_symbols_overview()` å¿«é€Ÿç†è§£æ–‡ä»¶ç»“æ„ |
| **3-4** | å¢é‡å¼€å‘å’Œè´¨é‡éªŒè¯ | `insert_after_symbol()` ç²¾ç¡®æ’å…¥ä»£ç  |
| **5-7** | é›†æˆéªŒè¯å’Œå‡†å¤‡æäº¤ | `find_referencing_symbols()` éªŒè¯é›†æˆæ­£ç¡®æ€§ |

**è¯¦ç»†è¯´æ˜**:

### Step 1: Intelligent Context Loading ğŸ” (NEW - Explore Agent é›†æˆ)

**ç›®çš„**: æ™ºèƒ½å®šä½ç›¸å…³ä»£ç ï¼Œé¿å…ç›²ç›®è¯»å–å¤§é‡æ— å…³æ–‡ä»¶

**æ‰§è¡Œæµç¨‹**:

#### 1.1 å¤æ‚åº¦è¯„ä¼°ï¼ˆComplexity Assessmentï¼‰

åœ¨è¯»å–ä»»ä½•æ–‡ä»¶å‰ï¼Œå…ˆè¯„ä¼°æ˜¯å¦éœ€è¦ Explore agentï¼š

```
é—®é¢˜ 1: åŠŸèƒ½æ¶‰åŠçš„æ–‡ä»¶æ•°é‡æ˜¯å¦ â‰¥ 3ï¼Ÿ
é—®é¢˜ 2: æ˜¯å¦ä¸æ¸…æ¥šå…·ä½“ä¿®æ”¹å“ªäº›æ–‡ä»¶ï¼Ÿ
é—®é¢˜ 3: é¡¹ç›®æ€»æ–‡ä»¶æ•°æ˜¯å¦ > 50ï¼Ÿ

å¦‚æœä»»æ„ä¸€ä¸ª YES â†’ ä½¿ç”¨ Explore agent
å¦åˆ™ â†’ è·³åˆ° Step 1.3 æ ‡å‡†åŠ è½½
```

#### 1.2 Explore Agent æ‰§è¡Œï¼ˆå¦‚æœéœ€è¦ï¼‰

**å¯åŠ¨ Explore agent**ï¼ˆä½¿ç”¨ Task toolï¼‰:

```bash
Task tool with subagent_type="Explore"
  - Prompt: "æ¢ç´¢ [feature_description] ç›¸å…³çš„ä»£ç æ–‡ä»¶å’Œä¾èµ–"
  - Thoroughness: "medium" (å¹³è¡¡é€Ÿåº¦å’Œè¦†ç›–ç‡)
  - Expected output:
    * ç›¸å…³æ–‡ä»¶åˆ—è¡¨ï¼ˆæŒ‰é‡è¦æ€§æ’åºï¼‰
    * ç®€è¦æ¶æ„ç†è§£
    * å…³é”®ä¾èµ–å…³ç³»
```

**Explore ç»“æœå¤„ç†**:
- âœ… è·å¾—ç›¸å…³æ–‡ä»¶åˆ—è¡¨ï¼ˆé€šå¸¸ 3-8 ä¸ªæ–‡ä»¶ï¼‰
- âœ… ç†è§£ä»£ç ç»„ç»‡ç»“æ„
- âœ… Token èŠ‚çœ: 70-80% (é¿å…è¯»å–æ— å…³æ–‡ä»¶)

**æ€§èƒ½å¯¹æ¯”**:
```
ä¼ ç»Ÿæ–¹å¼: è¯»å–æ‰€æœ‰å¯èƒ½æ–‡ä»¶ (15-30 ä¸ª) â†’ 20,000-40,000 tokens
Explore æ¨¡å¼: åªè¯»å–ç›¸å…³æ–‡ä»¶ (3-8 ä¸ª) â†’ 4,000-8,000 tokens
èŠ‚çœ: 75-80% tokensï¼Œ10-15 åˆ†é’Ÿæ—¶é—´
```

#### 1.3 æ ‡å‡†ä¸Šä¸‹æ–‡åŠ è½½

åŸºäº Explore ç»“æœï¼ˆæˆ–ç›´æ¥åŠ è½½å¦‚æœè·³è¿‡ 1.2ï¼‰ï¼š

**è¯»å–ç®¡ç†æ–‡æ¡£**:
- Read PLANNING.md (å¼€å‘æ ‡å‡†ã€æ¶æ„æŒ‡å—)
- Read TASK.md (å½“å‰ä»»åŠ¡ã€ä¾èµ–å…³ç³»)
- Read KNOWLEDGE.md (ä»£ç æ¨¡å¼ã€å·²çŸ¥é—®é¢˜)

**è¯»å–ä»£ç æ–‡ä»¶**ï¼ˆæ™ºèƒ½é€‰æ‹©ï¼‰:
- å¦‚æœä½¿ç”¨äº† Explore: åªè¯»å– Explore æ¨èçš„æ–‡ä»¶
- å¦‚æœæ²¡ç”¨ Explore: åŸºäº feature description åˆ¤æ–­éœ€è¦è¯»å–çš„æ–‡ä»¶
- ä½¿ç”¨ Glob å·¥å…·å®šä½æ–‡ä»¶ä½ç½®
- **å¹¶è¡Œè¯»å–**: å¦‚æœæ–‡ä»¶ â‰¥ 3ï¼Œä½¿ç”¨ Wave 1 å¹¶è¡Œè¯»å–æ¨¡å¼

#### 1.4 Serena MCP å¢å¼ºï¼ˆå¯é€‰ï¼‰

å¦‚æœä½¿ç”¨ `--serena` æ ‡å¿—:
- ä½¿ç”¨ `get_symbols_overview()` å¿«é€Ÿç†è§£æ–‡ä»¶ç»“æ„
- ä½¿ç”¨ `find_symbol()` ç²¾ç¡®å®šä½æ’å…¥ç‚¹
- è¯¦è§: [Â§ wf_05_code Serena MCP ä½¿ç”¨æŒ‡å—](docs/guides/wf_05_code_serena_guide.md)

**Step 1 è¾“å‡º**:
- âœ… ç›¸å…³ä»£ç æ–‡ä»¶å·²åŠ è½½
- âœ… æ¶æ„æ ‡å‡†å·²ç†è§£
- âœ… ä»»åŠ¡ä¾èµ–å·²ç¡®è®¤
- âœ… Token æ¶ˆè€—ä¼˜åŒ–ï¼ˆå¦‚æœç”¨äº† Explore: èŠ‚çœ 70-80%ï¼‰

---

### Step 2: Implementation Strategy & Development Mode Selection ğŸ”€

**ç›®çš„**: æ ¹æ®åŠŸèƒ½å¤æ‚åº¦é€‰æ‹©æœ€ä¼˜å¼€å‘æ¨¡å¼

#### 2.1 å¼€å‘æ¨¡å¼å†³ç­–

**è¯„ä¼°æ ‡å‡†**:
```
é—®é¢˜ 1: åŠŸèƒ½æ¶‰åŠå¤šä¸ªæ–‡ä»¶ï¼ˆâ‰¥ 3 ä¸ªï¼‰ï¼Ÿ
é—®é¢˜ 2: ä¼°è®¡ä»£ç é‡ > 100 è¡Œï¼Ÿ
é—®é¢˜ 3: éœ€è¦é…å¥—æµ‹è¯•å’Œæ–‡æ¡£ï¼Ÿ
é—®é¢˜ 4: åŠŸèƒ½ç›¸å¯¹ç‹¬ç«‹ï¼Œæµ‹è¯•å¯å¹¶è¡Œï¼Ÿ

å¦‚æœ â‰¥ 2 ä¸ª YES â†’ ä½¿ç”¨å¹¶è¡Œå¼€å‘æ¨¡å¼ï¼ˆMode Bï¼‰
å¦åˆ™ â†’ ä½¿ç”¨é¡ºåºå¼€å‘æ¨¡å¼ï¼ˆMode Aï¼‰
```

#### 2.2 è®¾è®¡å®ç°æ–¹æ¡ˆ

**æ‰€æœ‰æ¨¡å¼å…±åŒæ­¥éª¤**:
- **Architect**: Design components per architecture guidelines
- **Engineer**: Plan implementation approach with coding standards
- **Integration Specialist**: Identify integration points
- **Code Reviewer**: Define quality criteria
- **[Optional --serena]**: ä½¿ç”¨ `find_symbol()` ç²¾ç¡®å®šä½æ’å…¥ç‚¹

**æ¨¡å¼é€‰æ‹©è¾“å‡º**:
- âœ… å®ç°æ–¹æ¡ˆå·²è®¾è®¡
- âœ… å¼€å‘æ¨¡å¼å·²ç¡®å®šï¼ˆMode A æˆ– Mode Bï¼‰
- âœ… å¦‚æœ Mode Bï¼šå¹¶è¡Œä»»åŠ¡å·²è§„åˆ’

---

### Step 3: Progressive Development (Parallel or Sequential) ğŸš€

æ ¹æ® Step 2 é€‰æ‹©çš„æ¨¡å¼æ‰§è¡Œï¼š

#### Mode A: é¡ºåºå¼€å‘ï¼ˆSequential Developmentï¼‰

**é€‚ç”¨**: ç®€å•åŠŸèƒ½ï¼Œå•æ–‡ä»¶å°æ”¹åŠ¨

**æ‰§è¡Œæµç¨‹**:
1. **Core Implementation**
   - Implement feature following standards
   - **[Optional --serena]**: ä½¿ç”¨ `insert_after_symbol()` ç²¾ç¡®æ’å…¥ä»£ç 

2. **Validation**
   - Run basic checks
   - Update TASK.md progress

**ç‰¹ç‚¹**:
- âœ… ç®€å•ç›´æ¥
- âœ… é€‚åˆå¿«é€Ÿä¿®æ”¹
- â±ï¸ æ ‡å‡†å¼€å‘æ—¶é—´

---

#### Mode B: å¹¶è¡Œå¼€å‘ï¼ˆParallel Developmentï¼‰ â­ NEW

**é€‚ç”¨**: å¤æ‚åŠŸèƒ½ï¼Œå¤šæ–‡ä»¶æ”¹åŠ¨ï¼Œéœ€è¦é…å¥— test + doc

**æ‰§è¡Œæµç¨‹**:

**Wave 1: æ ¸å¿ƒå®ç°é˜¶æ®µ**
```bash
å®æ–½æ ¸å¿ƒåŠŸèƒ½ä»£ç 
- æŒ‰ç…§ Step 2 è®¾è®¡æ–¹æ¡ˆå®ç°
- ç¡®ä¿ä¸»è¦åŠŸèƒ½é€»è¾‘å®Œæˆ
- æ ‡è®°ä¸º "æ ¸å¿ƒå®Œæˆ"
```

**Wave 2: å¹¶è¡Œæ‰§è¡Œé˜¶æ®µ** ï¼ˆä½¿ç”¨ Task tool å¯åŠ¨ 3 ä¸ª agentsï¼‰
```bash
å¯åŠ¨ 3 ä¸ªå¹¶è¡Œ agentsï¼ˆå•æ¬¡æ¶ˆæ¯è°ƒç”¨ï¼‰:

Agent 1 - Test Development Agent:
  subagent_type: "general-purpose"
  prompt: "ä¸º [feature] ç¼–å†™å®Œæ•´æµ‹è¯•å¥—ä»¶
          - å•å…ƒæµ‹è¯•è¦†ç›–æ ¸å¿ƒé€»è¾‘
          - é›†æˆæµ‹è¯•éªŒè¯ç³»ç»Ÿé›†æˆ
          - è¾¹ç•Œæƒ…å†µå’Œé”™è¯¯å¤„ç†
          å‚è€ƒ: æ ¸å¿ƒå®ç°ä»£ç ï¼ˆWave 1 äº§å‡ºï¼‰"

Agent 2 - Documentation Agent:
  subagent_type: "general-purpose"
  prompt: "æ›´æ–°ç›¸å…³æ–‡æ¡£
          - API æ–‡æ¡£ï¼ˆå¦‚æœæœ‰å…¬å¼€æ¥å£ï¼‰
          - ä½¿ç”¨ç¤ºä¾‹
          - é›†æˆè¯´æ˜
          å‚è€ƒ: æ ¸å¿ƒå®ç°å’Œè®¾è®¡æ–‡æ¡£"

Agent 3 - Integration Verification Agent:
  subagent_type: "general-purpose"
  prompt: "éªŒè¯é›†æˆæ­£ç¡®æ€§
          - æ£€æŸ¥ä¾èµ–å…³ç³»
          - éªŒè¯æ¥å£å…¼å®¹æ€§
          - æ‰§è¡Œå†’çƒŸæµ‹è¯•"

âš ï¸ å…³é”®: 3 ä¸ª agents å¿…é¡»åœ¨å•ä¸ªæ¶ˆæ¯ä¸­åŒæ—¶å¯åŠ¨
```

**Checkpoint: ä¸€è‡´æ€§éªŒè¯**
```bash
ç­‰å¾…æ‰€æœ‰ agents å®Œæˆï¼Œç„¶åï¼š
1. éªŒè¯æµ‹è¯•è¦†ç›–æ ¸å¿ƒåŠŸèƒ½
2. éªŒè¯æ–‡æ¡£ä¸å®ç°ä¸€è‡´
3. éªŒè¯é›†æˆæµ‹è¯•é€šè¿‡
4. è§£å†³ä»»ä½•å†²çªæˆ–ä¸ä¸€è‡´
```

**æ€§èƒ½å¯¹æ¯”**:
```
é¡ºåºæ¨¡å¼ (Mode A): å®ç° (30min) â†’ æµ‹è¯• (20min) â†’ æ–‡æ¡£ (15min) = 65min
å¹¶è¡Œæ¨¡å¼ (Mode B): å®ç° (30min) â†’ [æµ‹è¯• || æ–‡æ¡£ || éªŒè¯] (20min) = 50min
               â†’ Checkpoint (5min) = 55min

æ€§èƒ½æå‡: 18% æ—¶é—´èŠ‚çœ (65min â†’ 55min)
è´¨é‡æå‡: å¹¶è¡ŒéªŒè¯ï¼Œæ›´æ—©å‘ç°é—®é¢˜
```

**å¹¶è¡Œæ¨¡å¼å®æ–½æ¸…å•**:
- [ ] Wave 1 æ ¸å¿ƒå®ç°å·²å®Œæˆ
- [ ] 3 ä¸ª agents å·²åœ¨å•ä¸ªæ¶ˆæ¯ä¸­å¯åŠ¨
- [ ] ç­‰å¾…æ‰€æœ‰ agents å®Œæˆï¼ˆä¸æå‰è¿›å…¥ Checkpointï¼‰
- [ ] Checkpoint éªŒè¯é€šè¿‡
- [ ] TASK.md å·²æ›´æ–°

---

### Step 4: Quality Validation & Integration

**æ‰€æœ‰æ¨¡å¼å…±åŒæ­¥éª¤**:
- Ensure code meets PLANNING.md standards
- **[Optional --serena]**: ä½¿ç”¨ `find_referencing_symbols()` éªŒè¯é›†æˆæ­£ç¡®æ€§
- Verify tests pass (å¦‚æœå¹¶è¡Œæ¨¡å¼: å·²ç”± Agent 1 å®Œæˆ)
- Verify docs updated (å¦‚æœå¹¶è¡Œæ¨¡å¼: å·²ç”± Agent 2 å®Œæˆ)

**æœ€ç»ˆæ£€æŸ¥**:
- âœ… ä»£ç è´¨é‡ç¬¦åˆæ ‡å‡†
- âœ… æµ‹è¯•è¦†ç›–å……åˆ†
- âœ… æ–‡æ¡£åŒæ­¥æ›´æ–°
- âœ… ç³»ç»Ÿé›†æˆæ­£ç¡®

**Serena MCP è¯¦ç»†ä½¿ç”¨æŒ‡å—**: [Â§ wf_05_code Serena MCP ä½¿ç”¨æŒ‡å—](docs/guides/wf_05_code_serena_guide.md)

---

### Phase 2: æ–‡æ¡£åŒæ­¥å†³ç­–æ ‘ (Step 8 - çº¦æŸé©±åŠ¨) â­

**å¼ºåˆ¶æ‰§è¡Œ**: ä»£ç å®Œæˆå**å¿…é¡»**æ‰§è¡Œæ­¤æ­¥ï¼Œæ–‡æ¡£æ˜¯ä»£ç çš„ä¸€ç­‰å…¬æ°‘

#### å¿«é€Ÿå‚è€ƒ - 6 ä¸ªå¼ºåˆ¶æ­¥éª¤

| æ­¥éª¤ | èŒè´£ | è¾“å‡º | å·¥å…· |
|------|------|------|------|
| **8.1** | æ–‡æ¡£å˜æ›´èŒƒå›´ç¡®å®š | Q1-Q5 æ£€æŸ¥æ¸…å•ç»“æœ | äººå·¥åˆ¤æ–­ |
| **8.2** | æŒ‰å±‚çº§è·¯ç”±æ–‡æ¡£å†³ç­– | ç¡®å®šç±»å‹ (A/B/C/D/E) | å†³ç­–æ ‘ |
| **8.3** | è‡ªåŠ¨æ›´æ–°æ–‡æ¡£ç´¢å¼• | Frontmatter éªŒè¯ + ç´¢å¼•åŒæ­¥ | Python è„šæœ¬ |
| **8.4** | æˆæœ¬æ£€æŸ¥é—¨æ§ | æ‰€æœ‰çº¦æŸæ£€æŸ¥çŠ¶æ€ | è‡ªåŠ¨æ£€æŸ¥ |
| **8.5** | å†³ç­–è®°å½•å’Œæ‰¿è¯º | commit message æ–‡æ¡£éƒ¨åˆ† | Git commit |
| **8.6** | å‡†å¤‡è¿›å…¥ä¸‹ä¸€æ­¥ | å·¥ä½œæµè·¯å¾„é€‰æ‹© | å†³ç­–çŸ©é˜µ |

#### æ–‡æ¡£ç±»å‹å¿«é€ŸæŸ¥æ‰¾è¡¨

| æ”¹åŠ¨ç±»å‹ | æ–‡æ¡£ç±»å‹ | ä½ç½® | çº¦æŸ | ä¾‹å­ |
|---------|---------|------|------|------|
| ç³»ç»Ÿæ ¸å¿ƒæ¶æ„æ”¹åŠ¨ | ç±»å‹A | PLANNING.md | < 50 è¡Œ | é‡æ„è®¤è¯å±‚ Session â†’ JWT |
| æŠ€æœ¯å†³ç­–å’Œæƒè¡¡ | ç±»å‹B | docs/adr/ | < 200 è¡Œ | ä¸ºä»€ä¹ˆé€‰æ‹©å¼‚æ­¥é˜Ÿåˆ— |
| æ–° API/åŠŸèƒ½ | ç±»å‹C | docs/ | < 500 è¡Œ | API ç«¯ç‚¹ä½¿ç”¨è¯´æ˜ |
| å¸¸è§é—®é¢˜/æœ€ä½³å®è·µ | ç±»å‹D | KNOWLEDGE.md Â§ FAQ | < 50 è¡Œ/Q | å¤„ç†å¹¶å‘ç«æ€æ¡ä»¶ |
| å†…éƒ¨é‡æ„/ä¼˜åŒ– | ç±»å‹E | æ— æ–‡æ¡£ | - | å˜é‡åæ”¹è¿›ã€å†…éƒ¨å‡½æ•°é‡æ„ |

**å®Œæ•´æ–‡æ¡£åŒæ­¥æŒ‡å—**: [Â§ wf_05_code æ–‡æ¡£åŒæ­¥å†³ç­–æ ‘æŒ‡å—](docs/guides/wf_05_code_doc_sync_guide.md)

---

## Output Format

### åŸºç¡€è¾“å‡ºï¼ˆStep 1-7ï¼‰
1. **Implementation Plan** â€“ approach aligned with project architecture
2. **Code Implementation** â€“ working code following standards
3. **Task Updates** â€“ TASK.md updates for completed work
4. **Integration Notes** â€“ how code fits into system
5. **Next Actions** â€“ remaining tasks and dependencies

### æ–‡æ¡£å†³ç­–è¾“å‡ºï¼ˆStep 8 - çº¦æŸé©±åŠ¨ï¼‰â­ NEW
6. **ğŸ“‹ æ–‡æ¡£å†³ç­–æ€»ç»“** â€“ å®Œæˆ Step 8.1-8.5 çš„ç»“æœï¼š
   - âœ… æ‰§è¡Œæ–‡æ¡£èŒƒå›´æ£€æŸ¥ (8.1) - 5 é¡¹æ£€æŸ¥æ¸…å•ç»“æœ
   - âœ… æ–‡æ¡£åˆ†å±‚å†³ç­– (8.2) - ç¡®å®šæ–‡æ¡£ç±»å‹ (A/B/C/D/E)
   - âœ… ç´¢å¼•æ›´æ–°æ‰§è¡Œ (8.3) - Frontmatter éªŒè¯ + ç´¢å¼•åŒæ­¥ç»“æœ
   - âœ… æˆæœ¬æ£€æŸ¥é€šè¿‡ (8.4) - æ‰€æœ‰çº¦æŸæ£€æŸ¥çš„çŠ¶æ€
   - âœ… å†³ç­–è®°å½• (8.5) - å°†è®°å½•åœ¨ git commit message ä¸­çš„æ–‡æ¡£éƒ¨åˆ†

   **è¾“å‡ºç¤ºä¾‹**ï¼š
   ```
   ğŸ“„ æ–‡æ¡£å†³ç­–æ€»ç»“
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   èŒƒå›´æ£€æŸ¥ (8.1):
   - Q1: æ·»åŠ å…¬å¼€ APIï¼Ÿ YES â†’ éœ€è¦æ–‡æ¡£
   - Q2-Q5: NO

   åˆ†å±‚å†³ç­– (8.2):
   - ç±»å‹C: æ–°å¢ docs/api/auth-endpoints.md (155 è¡Œ)

   ç´¢å¼•æ›´æ–° (8.3):
   - âœ… Frontmatter éªŒè¯é€šè¿‡
   - âœ… KNOWLEDGE.md ç´¢å¼•å·²æ›´æ–° (+1 æ¡ç›®)

   æˆæœ¬æ£€æŸ¥ (8.4):
   - KNOWLEDGE.md: 150 â†’ 151 è¡Œ (+0.7%, âœ…)
   - docs/: 2400 â†’ 2555 è¡Œ (+6.5%, âœ…)
   - æ‰€æœ‰çº¦æŸé€šè¿‡

   å†³ç­–è®°å½• (8.5):
   - å°†åœ¨ commit message ä¸­åŒ…å«æ–‡æ¡£éƒ¨åˆ†è¯´æ˜
   ```

7. **ğŸ“š æ–‡æ¡£å®Œæ•´æ€§æ£€æŸ¥** â€“ å¦‚æœåˆ›å»ºäº†æŠ€æœ¯æ–‡æ¡£ï¼š
   - âœ… æ‰€æœ‰æ–° docs/ æ–‡ä»¶éƒ½æœ‰å®Œæ•´çš„ Frontmatter å…ƒæ•°æ®
   - âœ… å¿…éœ€å­—æ®µ (7ä¸ª) éƒ½å·²å¡«å†™ï¼štitle, description, type, status, priority, created_date, last_updated
   - âœ… æ¨èå­—æ®µå·²å¡«å†™ï¼šrelated_documents, related_code, tags
   - âš ï¸ å¦‚æœç¼ºå¤±ï¼šå›åˆ° Step 8.3ï¼Œä½¿ç”¨è„šæœ¬ä¿®å¤æˆ–å‚è€ƒ CLAUDE.md FRONTMATTER è§„èŒƒ

8. **ğŸ¨ Ultrathink è®¾è®¡æ£€æŸ¥** (å¯é€‰æé†’) â€“ ä»£ç ä¼˜é›…åº¦è‡ªæ£€ï¼ˆå‚è§ PHILOSOPHY.mdï¼‰
   - âœ… å‡½æ•°/å˜é‡åå­—æ˜¯å¦è‡ªç„¶è€Œæ¸…æ™°ï¼Ÿ(Obsess Over Details)
   - âœ… ä»£ç ç»“æ„æ˜¯å¦æµç•…æ˜“æ‡‚ï¼Ÿ(Craft, Don't Code)
   - âœ… é”™è¯¯å¤„ç†æ˜¯å¦ä¼˜é›…è€Œæœ‰ç”¨ï¼Ÿ(Craft, Don't Code)
   - âœ… æœ‰æ²¡æœ‰ä¸å¿…è¦çš„å¤æ‚æ€§èƒ½ç§»é™¤ï¼Ÿ(Simplify Ruthlessly)

## Workflow Integration
- Reads context from PLANNING.md
- Updates progress in TASK.md
- Triggers `/wf_07_test` for validation
- Prepares for `/wf_08_review` cycle
- Leads to `/wf_11_commit` when complete

## ğŸ“Œ å·¥ä½œæµå¯¼èˆª (Phase 3 - é—­ç¯å·¥ä½œæµ)

### å·¥ä½œæµä½ç½®æŒ‡ç¤º

å½“ä½¿ç”¨æ­¤å‘½ä»¤æ—¶ï¼Œä½ æ­£åœ¨æ‰§è¡Œæ ‡å‡†å¼€å‘æµç¨‹çš„ä»¥ä¸‹é˜¶æ®µï¼š

```
[ä»»åŠ¡ç¡®è®¤] â†’ [æ¶æ„å’¨è¯¢] â†’ [ä»£ç å®ç° â† å½“å‰] â†’ [æµ‹è¯•éªŒè¯] â†’ [ä»£ç å®¡æŸ¥] â†’ [æäº¤ä¿å­˜]
   STEP 1      STEP 2 (å¯é€‰)   STEP 3        STEP 4      STEP 5     STEP 6
```

### å»ºè®®ä¸‹ä¸€æ­¥ï¼ˆ3 ä¸ªé€‰é¡¹ï¼‰

| é€‰é¡¹ | é€‚ç”¨åœºæ™¯ | å‘½ä»¤åºåˆ— | ä¼˜åŠ¿ |
|------|---------|---------|------|
| **A** | åŠŸèƒ½å¤æ‚ä¸”æ–°å¢ | `/wf_07_test` â†’ `/wf_08_review` â†’ `/wf_11_commit` | æµ‹è¯•å…ˆè¡Œï¼Œç¡®ä¿è´¨é‡ |
| **B** | åŠŸèƒ½ä¿®æ”¹å·²æœ‰ä»£ç  | `/wf_08_review` â†’ `/wf_07_test` â†’ `/wf_11_commit` | å¿«é€Ÿå‘ç°è®¾è®¡é—®é¢˜ |
| **C** | ç®€å•åŠŸèƒ½/æ–‡æ¡£ä¿®æ”¹ | `/wf_08_review` â†’ `/wf_11_commit` | å‡å°‘å¼€é”€ |

### ğŸ’¡ å†³ç­–æŒ‡å—

**æˆ‘åº”è¯¥æ‰§è¡Œå“ªä¸ªé€‰é¡¹ï¼Ÿ**

| æƒ…å†µ | å»ºè®® | å‘½ä»¤ |
|------|------|------|
| åŠŸèƒ½å¤æ‚ä¸”æ–°å¢ | é€‰é¡¹ A | /wf_07_test â†’ /wf_08_review â†’ /wf_11_commit |
| åŠŸèƒ½ä¿®æ”¹å·²æœ‰ä»£ç  | é€‰é¡¹ B | /wf_08_review â†’ /wf_07_test â†’ /wf_11_commit |
| ç®€å•åŠŸèƒ½/æ–‡æ¡£ä¿®æ”¹ | é€‰é¡¹ C | /wf_08_review â†’ /wf_11_commit |
| ä¸ç¡®å®š | å’¨è¯¢ | /wf_04_ask "æˆ‘åº”è¯¥å…ˆæµ‹è¯•è¿˜æ˜¯å…ˆå®¡æŸ¥ï¼Ÿ" |

### ğŸ”„ å›åˆ°ä¸Šä¸€æ­¥

å¦‚æœéœ€è¦ä¿®æ”¹è®¾è®¡æˆ–æ¶æ„ï¼š
```bash
/wf_04_ask "éœ€è¦é‡æ–°è®¨è®ºçš„æ¶æ„é—®é¢˜..."
# ä¿®æ”¹ä»£ç åç»§ç»­å½“å‰æ­¥éª¤
```

**å®Œæ•´å·¥ä½œæµå¯¼èˆªæŒ‡å—**: [Â§ wf_05_code å·¥ä½œæµå’Œå†³ç­–è·¯å¾„æŒ‡å—](docs/guides/wf_05_code_workflows.md)

---

## ç›¸å…³æ–‡æ¡£

- **ä¸»å‘½ä»¤ç³»ç»Ÿ**: WORKFLOWS.md - å®Œæ•´å·¥ä½œæµè¯´æ˜
- **ä»£ç æ ‡å‡†**: PLANNING.md (Development Standards)
- **ä»»åŠ¡è¿½è¸ª**: TASK.md
- **è®¾è®¡åŸåˆ™**: PHILOSOPHY.md (Ultrathink)
- **æ–‡æ¡£åŒæ­¥æŒ‡å—**: [docs/guides/wf_05_code_doc_sync_guide.md](docs/guides/wf_05_code_doc_sync_guide.md)
- **Serena MCP æŒ‡å—**: [docs/guides/wf_05_code_serena_guide.md](docs/guides/wf_05_code_serena_guide.md)
- **å·¥ä½œæµå¯¼èˆªæŒ‡å—**: [docs/guides/wf_05_code_workflows.md](docs/guides/wf_05_code_workflows.md)
